"use strict";angular.module("simplicity.google.place.api.adapter",[]).constant("PLACES_API_CONFIG",{location:"35.5951125,-82.5511088",radius:8e4,key:"AIzaSyDV6CtVSMRpAXBNxGZ9-ClGTA84E4PTsF4"}).factory("simplicityGooglePlacesApiAdapter",["$http","$location","$q","$filter","PLACES_API_CONFIG",function(e,t,s,a,i){var r={},o=new google.maps.places.PlacesService(document.getElementById("stupid-required-google-input"));return r.search=function(e){var t=s.defer(),a=function(e,s){if(s===google.maps.places.PlacesServiceStatus.OK){for(var a=[],i=0;i<e.length;i++){var r={id:e[i].place_id,label:e[i].name+" | "+e[i].vicinity,type:"google-place",googleResult:!0};a.push(r)}var o={groupOrder:0,iconClass:"fa-google",label:"Google Places",name:"google_places",offset:3,results:a};t.resolve(o)}else t.resolve("no google results")},i=new google.maps.LatLng(35.5951125,-82.5511088),r={name:e,location:i,radius:3e4,types:["establishment"]};return o.nearbySearch(r,a),t.promise},r.getDetails=function(e){var t=s.defer(),a=function(e,s){t.resolve(s===google.maps.places.PlacesServiceStatus.OK?e:"no google results")},i=(new google.maps.LatLng(35.5951125,-82.5511088),{placeId:e});return o.getDetails(i,a),t.promise},r}]),angular.module("simplicity.arcgis.rest.api.adapter",[]).constant("SIMPLICITY_ARCGIS_QUERIES",{crimes:{address:{sqlArray:["pid in (","crimeIds",") and thedate >","time"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},street_name:{sqlArray:["pid in (","crimeIds",") and thedate >","time"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},neighborhood:{sqlArray:["neighborhood='","neighborhoodName","' and thedate >","time"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}}},development:{address:{sqlArray:["apn in  (","permitIds",") and record_module = 'Planning' and record_type_type = 'Development' and date_opened >","time"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},street_name:{sqlArray:["apn in  (","permitIds",") and record_module = 'Planning' and record_type_type = 'Development' and date_opened >","time"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},neighborhood:{sqlArray:["neighborhood='","neighborhoodName","' and record_module = 'Planning' and record_type_type = 'Development' and date_opened >","time"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}}},addresses:{address:{sqlArray:["civicaddress_id in (","civicaddressIds",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},street_name:{sqlArray:["civicaddress_id in (","civicaddressIds",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},owner_name:{sqlArray:["civicaddress_id in (","civicaddressIds",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},neighborhood:{sqlArray:["neighborhood = '","neighborhoodName","'"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}}},neighborhoods:{neighborhood:{sqlArray:["name in ('","neighborhoodNames","')"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}}},properties:{address:{sqlArray:["pinnum='","pinnum","'"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},street_name:{sqlArray:["pinnum in (","pinnums",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},owner_name:{sqlArray:["pinnum in (","pinnums",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},pinnum:{sqlArray:["pinnum in (","pinnums",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}}},owners:{address:{sqlArray:["pinnum='","pinnum","'"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"objectid, owner, owner_address, owner_citystatezip"}},street_name:{sqlArray:["pinnum in (","pinnums",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"objectid, owner, owner_address, owner_citystatezip"}},owner_name:{sqlArray:["pinnum in (","pinnums",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"objectid, owner, owner_address, owner_citystatezip"}},pinnum:{sqlArray:["pinnum in (","pinnums",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"objectid, owner, owner_address, owner_citystatezip"}},neighborhood:{sqlArray:["neighborhood='","neighborhoodName","'"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"objectid, owner, owner_address, owner_citystatezip"}}},zoningOverlays:{address:{sqlArray:["name='","zoningOverlayName","'"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},street_name:{sqlArray:["name='","zoningOverlayName","'"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},owner_name:{sqlArray:["name='","zoningOverlayName","'"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},pinnum:{sqlArray:["name='","zoningOverlayName","'"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}}},streets:{address:{sqlArray:["centerline_id in (","centerlineIds",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},street_name:{sqlArray:["centerline_id in (","centerlineIds",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}}},xrefs:{address:{sqlArray:["civicaddress_id=","civicaddressId"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},street_name:{sqlArray:["centerline_id in (","centerlineIds",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},owner_name:{sqlArray:["pinnum in (","pinnums",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},pinnum:{sqlArray:["pinnum in (","pinnums",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}}},addressCaches:{address:{sqlArray:["civicaddress_id=","civicaddressId"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},street_name:{sqlArray:["civicaddress_id in (","civicaddressIds",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},owner_name:{sqlArray:["civicaddress_id in (","civicaddressIds",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}},pinnum:{sqlArray:["civicaddress_id in (","civicaddressIds",")"],sqlParamName:"where",queryParams:{where:"",f:"json",outFields:"*"}}}}).factory("simplicityArcGisRestApiAdapter",["$http","$location","$q","$filter","SEARCH_CONFIG",function(e,t,s,a,i){var r={},o={street_name:"Streets",address:"Addresses",neighborhood:"Neighborhoods",owner_name:"Owners",civicaddressid:"Civic Address IDs",pinnum:"PINs"},n={street_name:"fa-road",address:"fa-home",neighborhood:"fa-users",owner_name:"fa-user",civicaddressid:"fa-cube",pinnum:"fa-cube"},l=function(e){return o[e]},c=function(e){return n[e]},p=function(e,t){for(var s={},a=[],i=0,r=0;r<t.candidates.length;r++){var o={id:t.candidates[r].attributes.User_fld,label:t.candidates[r].attributes.Match_addr,type:t.candidates[r].attributes.Loc_name,googleResult:!1};if(void 0===s[o.type]){var n={name:o.type,groupOrder:i,offset:3,iconClass:c(o.type),label:l(o.type),results:[o]};s[o.type]=n,i+=1}else s[o.type].results.push(o)}for(var p in s)a.push(s[p]);if(a.sort(function(e,t){return e.groupOrder-t.groupOrder}),void 0!==a[0]&&void 0!==a[1]){if("street_name"===a[0].name&&"address"===a[1].name&&!isNaN(Number(e[0]))){var d=a[1];a.splice(1,1),a.splice(0,0,d)}if("street_name"===a[1].name&&"address"===a[0].name&&isNaN(Number(e[0]))){var m=a[1];a.splice(1,1),a.splice(0,0,m)}}for(var u=0;u<a.length;u++)if("owner_name"===a[u].name||"street_name"===a[u].name){for(var h={},g=0;g<a[u].results.length;g++)void 0===h[a[u].results[g].label]?(h[a[u].results[g].label]=a[u].results[g],h[a[u].results[g].label].id=a[u].results[g].id):h[a[u].results[g].label].id+=","+a[u].results[g].id;var f=[];for(var y in h)f.push(h[y]);a[u].results=f}return a};return r.search=function(t,a){var i=s.defer(),r={SingleLine:a,outFields:"Match_addr, User_fld, Loc_name",f:"json"};return e({method:"GET",url:t,params:r,cache:!0}).success(function(e,t,s,r){e.error?console.log(e.error.code+" geocodeService.findAddressCanidates "+e.error.message):i.resolve(p(a,e))}).error(function(e){console.log("Error geocoding "+a),console.log(e),i.resolve(e)}),i.promise},r.formatHttpResults=function(e){for(var t=[],s=0;s<e.features.length;s++)t.push(L.esri.Util.arcgisToGeojson(e.features[s]));var a={type:"FeatureCollection",features:t};return a},r.formatTimeForQuery=function(e){var t=new Date(e),s=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),r="'"+s+"-"+a+"-"+i+"'";return r},r}]),angular.module("simplicity.http",[]).factory("simplicityHttp",["$http","$q",function(e,t){var s={};return s.get=function(s,a){var i=t.defer();return a.callback="JSON_CALLBACK",e({method:"JSONP",url:s,params:a,cache:!0}).success(function(e,t,a,r){e.error?console.log(e.error.code+" queryBackend on url "+s+". "+e.error.message):i.resolve(e)}).error(function(e){console.log("Error querying feature service."),console.log(e)}),i.promise},s.buildQueryParams=function(e,t){for(var s=[],a=0;a<e.sqlArray.length;a++)s.push(void 0!==t[e.sqlArray[a]]?t[e.sqlArray[a]]:e.sqlArray[a]);var i=s.join(""),r=e.queryParams;return r[e.sqlParamName]=i,r},s}]),angular.module("simplicity.frontend.config",[]).constant("COLORS",{crime:{"Aggravated Assault":"#FF0000",Burglary:"#FFF000","Drug Arrest":"#FFA500",Homicide:"#FFFFF0",Larceny:"#00FF00","Larceny of Motor Vehicle":"#000080",Rape:"#0000FF",Robbery:"#FF00FF",Vandalism:"#7FFFD4"},development:{"Conditional Use Permit":"#FF0000","Conditional Zoning Permit":"#FFF000","Planning Level I":"#0000FF","Planning Level II":"#7FFFD4","Planning Level III":"#00FFFF","Planning Signage Plan":"#000080"},streetmaintenance:{"CITY OF ASHEVILLE":{color:"#FF0000"},PRIVATE:{color:"#FFF000"},UNKNOWN:{color:"#FFA500"},NCDOT:{color:"#00FF00"},"NATIONAL PARK SERVICE":{color:"#000080"}}}).constant("SELECT_OPTIONS",{extent:[{value:82.5,label:"a quarter block (27.5 yards)"},{value:165,label:"half a block (55 yards)"},{value:330,label:"a city block (110 yards)"},{value:660,label:"a couple city blocks (1/8 mile)"},{value:1320,label:"a quarter mile"}],timeframe:[{value:"last-30-days",label:"the last 30 days"},{value:"last-6-months",label:"the last 6 months"},{value:"last-year",label:"the last year"},{value:"last-5-years",label:"the last 5 years"},{value:"last-10-years",label:"the last 10 years"},{value:"all-time",label:"all time"}]}).constant("DESCRIPTIONS",{crime:{"Aggravated Assault":"The unlawful attack by one person upon another for the purpose of inflicting severe bodily harm.",Burglary:"The unlawful entry of a structure to commit a felony or theft.","Drug Arrest":"State and/or local offenses relating to the unlawful possession, sale, use, growing, manufacturing, and making of narcotic drugs including opium or cocaine and their derivatives, marijuana, synthetic narcotics, and dangerous nonnarcotic drugs such as barbiturates.",Homicide:"The willful (nonnegligent) killing of one human being by another.",Larceny:"The unlawful taking or stealing of property without the use of force, violence, or fraud.","Larceny of Motor Vehicle":"The unlawful taking or stealing of a motor vehicle, including attempts.",Rape:"The carnal knowledge of a female forcibly and against her will.",Robbery:"The taking or attempting to take anything of value by force or threat.",Vandalism:"The malicious destruction, injury, disfigurement or defacement of real or personal property."},development:{"Conditional Use Permit":"All Level III projects or use is determined to require a conditional use permit by the zoning district where it is located.","Conditional Zoning Permit":"Changing the zoning of a property for a specific site plan and specific use.","Planning Level I":"Commercial construction less than 35,000 square feet or less than 20 multi-family units; Level I permits are reviewed at the city staff level.","Planning Level II":"Commercial construction 35,000-100,000 square feet or 20-50 multi-family units; Level II projects are reviewed by city staff, the Technical Review Committee (TRC), and the Planning and Zoning Commission.","Planning Level III":"Commercial construction larger than 100,000 square feet or more than 50 multi-family units; Level III projects are reviewed by city staff, the Technical Review Committee (TRC), the Planning and Zoning Commission and Asheville City Council.","Planning Signage Plan":""}}).constant("STREET_MAINTENANCE_CONTACTS",{NCDOT:"https://apps.dot.state.nc.us/contactus/PostComment.aspx?Unit=PIO","CITY OF ASHEVILLE":"http://www.ashevillenc.gov/Departments/StreetServices/StreetMaintenance.aspx",PRIVATE:null,UNKNOWN:null,"NATIONAL PARK SERVICE":"http://www.nps.gov/blri/contacts.htm"}).constant("STREET_MAINTENANCE_CITIZEN_SERVICE_REQUESTS",{NCDOT:{brand:null,url:null},"CITY OF ASHEVILLE":{brand:"The Asheville App",url:"http://www.ashevillenc.gov/Departments/ITServices/OnlineServices/CitizenServiceRequests.aspx"},PRIVATE:{brand:null,url:null},UNKNOWN:{brand:null,url:null},"NATIONAL PARK SERVICE":{brand:null,url:null}}).constant("CODELINKS",{CBD:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-18CEBUDI",CBI:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-12COBUIDI",CBII:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-13COBUIIDI","CBII-CZ":"disable",CI:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-20COINDI",HB:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-16HIBUDI","HB-CZ":"disable",HCU:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTIXOVDI_S7-9-2HIPROVDI","HR-1:CORE":"disable","HR-2:EXPN":"disable","HR-3:CRDR":"disable","HR-4:TRAD":"disable","HR-5:L-W":"disable","HR-6:TOWN":"disable",IND:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-22INDI","IND-CZ":"disable",INST:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-15INDI","INST-CZ":"disable",LI:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-21LIINDI",NB:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-8NEBUDI",NCD:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-24NECODI","NOT ZONED":"disable",O2:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-10OFIIDI",OB:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-11OFBUDI",OFFICE:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-9OFDI",RB:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-17REBUDI","RB-CU":"disable",RESORT:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-14REDI",RIVER:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-19RIDI",RM16:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-7RMREMUMIHIDEDI","RM16-CZ":"disable",RM6:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-5REMUMILODEDI","RM6-CZ":"disable",RM8:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-6REMUMIMEDEDI",RS2:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-2RESIMILODEDI",RS4:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-3RESIMIMEDEDI","RS4-CZ":"disable",RS8:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-4RESIMIHIDEDI","RS8-CZ":"disable",UP:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-26URPLDI","UP-CZ":"disable",URD:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-25URREDI",UV:"https://www.municode.com/library/nc/asheville/codes/code_of_ordinances?nodeId=PTIICOOR_CH7DE_ARTVIIIGEUSDI_S7-8-23URVIDI"}).factory("TimeFrame",[function(){var e={};return e.get=function(e){var t=new Date;return"last-30-days"===e?t.setMonth(t.getMonth()-1):"last-6-months"===e?t.setMonth(t.getMonth()-6):"last-year"===e?t.setFullYear(t.getFullYear()-1):"last-5-years"===e?t.setFullYear(t.getFullYear()-5):"last-10-years"===e?t.setFullYear(t.getFullYear()-10):"all-time"===e?t.setFullYear(t.getFullYear()-100):t.setMonth(t.getMonth()-1),t},e}]),angular.module("simplicity.backend.config",["simplicity.arcgis.rest.api.adapter","simplicity.google.place.api.adapter","simplicity.http"]).constant("TABLES",{crimes:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/0/query",dataApi:"ArcGisRestApi"},development:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/1/query",dataApi:"ArcGisRestApi"},addresses:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/2/query",dataApi:"ArcGisRestApi"},neighborhoods:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/4/query",dataApi:"ArcGisRestApi"},properties:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/6/query",dataApi:"ArcGisRestApi"},owners:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/6/query",dataApi:"ArcGisRestApi"},zoningOverlays:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/8/query",dataApi:"ArcGisRestApi"},streets:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/9/query",dataApi:"ArcGisRestApi"},xrefs:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/11/query",dataApi:"ArcGisRestApi"},addressCaches:{url:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/opendata/FeatureServer/12/query",dataApi:"ArcGisRestApi"}}).constant("SEARCH_CONFIG",{searchUrl:"http://arcgis-arcgisserver1-1222684815.us-east-1.elb.amazonaws.com/arcgis/rest/services/coa_composite_locator/GeocodeServer/findAddressCandidates",returnFields:["Match_addr","User_fld","Loc_name"],searchEngine:"ArcGisRestApiGeocoder"}).factory("simplicityBackend",["$http","$location","$q","$filter","$stateParams","simplicityHttp","simplicityArcGisRestApiAdapter","simplicityGooglePlacesApiAdapter","SIMPLICITY_ARCGIS_QUERIES","TABLES","SEARCH_CONFIG",function(e,t,s,a,i,r,o,n,l,c,p){var d={};return d.simplicitySearch=function(e){var t=s.defer(),a=[];return o.search(p.searchUrl,e).then(function(s){a=s,n.search(e).then(function(e){"no google results"===e?t.resolve(a):(a.push(e),t.resolve(a))})}),t.promise},d.simplicityQuery=function(e,t){var a=s.defer(),n=l[e][i.searchby],p=r.buildQueryParams(n,t);return r.get(c[e].url,p).then(function(e){a.resolve(o.formatHttpResults(e))}),a.promise},d.simplicityFindGoogleAddress=function(e){var t=s.defer();return n.getDetails(e.id).then(function(s){for(var a,i=e.label.split("|"),r=i[1].split(","),n="",l=0;l<s.address_components.length;l++)for(var c=0;c<s.address_components[l].types.length;c++)"postal_code"===s.address_components[l].types[c]&&(n=s.address_components[l].long_name);a=""!==n?r[0]+", "+n:r[0],o.search(p.searchUrl,a).then(function(e){for(var s=!1,i=0;i<e.length;i++)if("address"===e[i].name)if(e[i].results.length>0)for(var r=0;r<e[i].results.length;r++){var o=a.split(" ");o.splice(0,1);var n=e[i].results[r].label.split(" ");n.length===o.length&&(s=!0,t.resolve(e[i].results[r]))}else t.resolve("could not find address");s||t.resolve("could not find address")})}),t.promise},d.formatTimeForQuery=function(e){return o.formatTimeForQuery(e)},d}]);var simplicity=angular.module("simplicity",["angulartics","angulartics.google.analytics","simplicity.frontend.config","simplicity.backend.config","ui.router","ngAnimate"]);simplicity.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(e,t,s){t.when("/topics","/topics/list"),t.when("","/search"),t.when("/","/search"),t.when("/a-zA-Z0-9/",""),t.otherwise("/search"),e.state("main",{url:"",templateUrl:"main/main.html",controller:"MainCtrl"}).state("main.search",{url:"/search?topic",templateUrl:"search/search.html",controller:"SearchCtrl"}).state("main.topics",{url:"/topics","abstract":!0,template:"<div ui-view></div>"}).state("main.topics.list",{url:"/list?searchtext&searchby&id",templateUrl:"topics/topic-list/topic.list.html",controller:"TopicListCtrl"}).state("main.topics.topic",{url:"/:topic?searchtext&searchby&id&view&timeframe&extent&type&mapcenter",templateUrl:"topics/topic-single/topic.single.html",controller:"TopicSingleCtrl"})}]),simplicity.factory("AddressCache",["$http","$q","$stateParams","simplicityBackend",function(e,t,s,a){var i={},r={},o={},n=[],l=function(e,t){return null===e?[]:e.split(t)},c=function(e,t,s){r[e]?r[e][t]=s:(r[e]={},r[e][t]=s)},p=function(e){var i=t.defer(),o={address:{table:"addresses",queryValues:{civicaddressIds:e.join()}},street_name:{table:"streets",queryValues:{centerlineIds:e.join()}},neighborhood:{table:"neighborhoods",queryValues:{neighborhoodNames:e.join()}},owner_name:{table:"addresses",queryValues:{civicaddressIds:e.join()}}};return o[s.searchby]?a.simplicityQuery(o[s.searchby].table,o[s.searchby].queryValues).then(function(e){r.searchGeojson=e,i.resolve()}):i.resolve(),i.promise},d=function(e){var s=t.defer();return a.simplicityQuery("addressCaches",{civicaddressId:e}).then(function(e){for(var t=0;t<e.features.length;t++){var a=e.features[t].properties;"ADDRESS IN CITY"===a.type?r.inTheCity="YES"===a.data?!0:!1:"CRIME"===a.type?c("crime",a.distance,l(a.data,",")):"ZONING"===a.type?r.zoning=l(a.data,","):"PERMITS"===a.type?c("development",a.distance,l(a.data,",")):"TRASH DAY"===a.type?r.trash=a.data:"RECYCLE DAY"===a.type?r.recycling=a.data:"ZONING OVERLAYS"===a.type&&(r.zoningOverlays=a.data)}s.resolve(r)}),s.promise},m=function(e){var s=t.defer();return a.simplicityQuery("addressCaches",{civicaddressIds:e.join()}).then(function(e){for(var t={},a={},i=0;i<e.features.length;i++){var o=e.features[i].properties;if("ZONING"===o.type)void 0!==r.zoning?r.zoning[o.civicaddress_id]=l(o.data,","):(r.zoning={},r.zoning[o.civicaddress_id]=l(o.data,","));else if("CRIME"===o.type){void 0===t[o.distance]&&(t[o.distance]={});for(var n=l(o.data,","),p=0;p<n.length;p++)t[o.distance][n[p]]||(t[o.distance][n[p]]="crime")}else if("PERMITS"===o.type){void 0===a[o.distance]&&(a[o.distance]={});for(var d=l(o.data,","),m=0;m<d.length;m++)a[o.distance][d[m]]||(a[o.distance][d[m]]="development")}else"ADDRESS IN CITY"===o.type&&(r.inTheCity?r.inTheCity[o.civicaddress_id]="YES"===o.data?!0:!1:(r.inTheCity={},r.inTheCity[o.civicaddress_id]="YES"===o.data?!0:!1))}for(var u in t){var h=[];for(var g in t[u])h.push([g]);c("crime",u,h)}for(var f in a){var y=[];for(var v in a[f])y.push([v]);c("development",f,y)}s.resolve(r)}),s.promise};return i.query=function(){var e=t.defer();if(r={},"address"===s.searchby)p([s.id]).then(function(){e.resolve(d(s.id))});else if("street_name"===s.searchby){for(var i=s.id.split(","),l=0;l<i.length;l++)i[l]=Number(i[l]);a.simplicityQuery("xrefs",{centerlineIds:i.join()}).then(function(t){n=[];for(var s=0;s<t.features.length;s++)n.push(t.features[s].properties.civicaddress_id),o[t.features[s].properties.pinnum]=t.features[s].properties.civicaddress_id;p(i).then(function(){e.resolve(m(n))})})}else if("owner_name"===s.searchby||"pinnum"===s.searchby){for(var c=s.id.split(","),u="",h=0;h<c.length;h++)u=0===h?u+"'"+c[h]+"'":u+",'"+c[h]+"'";a.simplicityQuery("xrefs",{pinnums:u}).then(function(t){n=[],o={};for(var s=0;s<t.features.length;s++)n.push(t.features[s].properties.civicaddress_id),o[t.features[s].properties.pinnum]=t.features[s].properties.civicaddress_id;p(n).then(function(){e.resolve(m(n))})})}else"neighborhood"===s.searchby&&e.resolve(p([s.id]));return e.promise},i.get=function(){return r},i.pinnum2civicaddressid=function(){return o},i.civicaddressIdArray=function(){return n},i}]),simplicity.controller("AppCtrl",["$scope","$location",function(e,t){e.$on("$stateChangeSuccess",function(t,s){e.back="main"===s.name?!0:!1})}]),simplicity.controller("MainCtrl",["$scope","$state","$stateParams","$location","$http","$timeout",function(e,t,s,a,i,r){e.goHome=function(){a.path("")}}]),simplicity.controller("SearchCtrl",["$scope","$stateParams","$state","$timeout","simplicityBackend","Topics",function(e,t,s,a,i,r){$("#searchContent").css({minHeight:$(window).height()}),$("#addressSearch").focus(),e.searchText="",e.errorMessage={show:!1,message:"We had trouble locating that location. Please try to enter a location again."},e.helperMessage={show:!1,message:"Please choose one of the options below."},e.discoverText="places",e.searchFor="an address, street, neighborhood, or property";var o={};e.showTopicsLink=!0,null!==t.topic&&(o=r.topicProperties(),e.showTopicsLink=!1,e.discoverText=o.plural,e.searchFor=o.searchForText),e.doSearch=function(s,r){var n=$("#inputSearch").offset().top-20;return $("html, body").animate({scrollTop:n+"px"}),s.length<3?void(e.searchGroups=[]):(13===r.keyCode&&""!==s&&(e.helperMessage.show=!0,a(function(){e.helperMessage.show=!1},2e3)),void i.simplicitySearch(s).then(function(a){if(""===s)e.searchGroups=[];else if(0!==a.length)if(null!==t.topic){for(var i=a.length-1;i>=0;i--)void 0===o.searchby[a[i].name]&&a.splice(i,1);e.searchGroups=a}else e.searchGroups=a}))},e.unFocus=function(){a(function(){e.searchGroups=[]},100)},e.detailedSelection=[],e.goToTopics=function(e,a){for(var r="",o=0;o<e.label.length;o++)r+="&"===e.label.charAt(o)?"AND":e.label.charAt(o);"civicaddressid"===e.type&&(e.type="address"),null!==t.topic?e.googleResult===!0?i.simplicityFindGoogleAddress(e).then(function(e){s.go("main.topics.topic",{topic:t.topic,searchtext:e.label,searchby:e.type,id:e.id})}):s.go("main.topics.topic",{topic:t.topic,searchtext:r,searchby:e.type,id:e.id}):e.googleResult===!0?i.simplicityFindGoogleAddress(e).then(function(e){s.go("main.topics.list",{searchtext:e.label,searchby:e.type,id:e.id})}):s.go("main.topics.list",{searchtext:r,searchby:e.type,id:e.id})}}]),simplicity.factory("Topics",["$q","$stateParams","Crime","Development","Property","Trash","Recycling","Zoning","StreetMaintenance","AddressList","Owner","OwnerMailingList","AddressMailingList",function(e,t,s,a,i,r,o,n,l,c,p,d,m){var u={},h={crime:s,development:a,property:i,trash:r,recycling:o,zoning:n,streetmaintenance:l,addresslist:c,owner:p,ownermailinglist:d,addressmailinglist:m},g=function(){var e=[];for(var t in h){var s=h[t];e.push(s.getTopicProperties())}return e};return u.getTopics=function(){var e,s=g();if(null===t.id){for(var a=[],i=0;i<s.length;i++)void 0!==s[i].questions.topic&&(s[i].question=s[i].questions.topic),e="#/search?topic="+s[i].name,s[i].linkTo=e,a.push(s[i]);return a}if(null!==t.searchby){for(var r=[],o=0;o<s.length;o++)if(s[o].searchby[t.searchby]){void 0!==s[o].questions[t.searchby]&&(s[o].question=s[o].questions[t.searchby]),e="#/topics/"+s[o].name+"?searchtext="+t.searchtext+"&searchby="+t.searchby+"&id="+t.id;var n=s[o].searchby[t.searchby].params;for(var l in n)null!==n[l]&&(e=e+"&"+l+"="+n[l]);s[o].linkTo=e,r.push(s[o])}return r}},u.topicProperties=function(e){return h[t.topic].getTopicProperties()},u.buildTopic=function(){var s=e.defer();return h[t.topic].build().then(function(e){s.resolve(e)}),s.promise},u}]),simplicity.controller("TopicListCtrl",["$scope","$stateParams","$state","Topics","AddressCache",function(e,t,s,a,i){$("html, body").animate({scrollTop:"0px"}),e.$on("$stateChangeSuccess",function(t,s){e.back="main.topics"===s.name?!0:!1}),e.heading="Topics for ",t.searchtext?e.searchText=t.searchtext:(e.heading="Topics",e.searchText=""),e.topics=a.getTopics(t),e.inTheCity=!1,e.loading=!1,e.anAddress=!1,"address"===t.searchby&&(e.anAddress=!0,e.loading=!0,i.query().then(function(t){e.loading=!1,e.inTheCity=t.inTheCity===!0?!0:!1}))}]),simplicity.controller("TopicSingleCtrl",["$scope","$stateParams","$state","$filter","$location","Topics","AddressCache","SELECT_OPTIONS",function(e,t,s,a,i,r,o,n){$(function(){$('[data-toggle="tooltip"]').tooltip()});var l=function(e,a){var i=t;i[e]=a,s.transitionTo("main.topics.topic",i,{reload:!0})};e.topicProperties=r.topicProperties(t.topic);var c=r.getTopics();e.linkTopics=[];for(var p=0;p<e.topicProperties.linkTopics.length;p++)for(var d=0;d<c.length;d++)c[d].name===e.topicProperties.linkTopics[p]&&e.linkTopics.push(c[d]);e.stateParams=t,null===t.searchby||null===t.id?s.go("main.search.composite",{composite:t.topic}):void 0===e.topicProperties.searchby[t.searchby]&&s.go("main.search.composite",{composite:"composite"}),e.headerTemplate=e.topicProperties.searchby[t.searchby].headerTemplate;var m=function(){for(var s=!1,a=0;a<e.topicProperties.searchby[t.searchby].params.validViews.length;a++)e.topicProperties.searchby[t.searchby].params.validViews[a]===t.view&&(s=!0);return s};null===t.view?l("view",e.topicProperties.searchby[t.searchby].params.view):m()?"summary"===t.view&&null!==t.type?l("type",null):"map"!==t.view&&null!==t.mapcenter&&l("mapcenter",null):l("view",e.topicProperties.searchby[t.searchby].params.view),e.onClickChangeView=function(e){l("view",e)},null===t.timeframe&&null!==e.topicProperties.searchby[t.searchby].params.timeframe&&l("timeframe",e.topicProperties.searchby[t.searchby].params.timeframe),e.timeframeOptions=n.timeframe,e.timeframeOptionIndex=0;for(var u=0;u<e.timeframeOptions.length;u++)e.timeframeOptions[u].value===t.timeframe&&(e.timeframeOptionIndex=u);e.onChangeTimeframeValue=function(t){e.loading=!0,setTimeout(function(){l("timeframe",t.value)},250)},null===t.extent&&null!==e.topicProperties.searchby[t.searchby].params.extent&&l("extent",e.topicProperties.searchby[t.searchby].params.extent),e.extentOptions=n.extent,e.extentOptionIndex=0;for(var h=0;h<e.extentOptions.length;h++)e.extentOptions[h].value===Number(t.extent)&&(e.extentOptionIndex=h);e.onChangeExtentValue=function(e){l("extent",e.value)};var g=L.tileLayer("http://a.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright" title="OpenStreetMap" target="_blank">OpenStreetMap</a> contributors',maxZoom:22}),f=L.esri.basemapLayer("Imagery"),y={"Street Map":g,Imagery:f};$(".leaflet-control-attribution").css("maxWidth","90%");var v=L.map("map",{center:[35.5951125,-82.5511088],zoom:13,maxZoom:22,layers:[g]}),b=L.control.layers(y).addTo(v);e.filterText=null===t.type||"null"===t.type?"":t.type;var w=!1,x=function(){w?($("body").css({overflow:"auto"}),$("#map").css({height:"400px",width:"100%",position:"relative"}),$(".leaflet-control-expand-map-interior").removeClass("leaflet-control-collapse"),$(".leaflet-control-expand-map-interior").addClass("leaflet-control-expand"),w=!w):($("body").css({padding:0,margin:0,height:"100%",width:"100%",overflow:"hidden"}),$("html").css({height:"100%",width:"100%"}),$("#map").css({height:$(window).height(),width:$(window).width(),position:"fixed",top:"0px",left:"0px",zIndex:999}),$(".leaflet-control-expand-map-interior").removeClass("leaflet-control-expand"),
$(".leaflet-control-expand-map-interior").addClass("leaflet-control-collapse"),w=!w),v.invalidateSize()},_=L.Control.extend({options:{position:"topleft"},onAdd:function(e){var t=L.DomUtil.create("div","leaflet-control-command");L.DomEvent.addListener(t,"click",L.DomEvent.stopPropagation).addListener(t,"click",L.DomEvent.preventDefault).addListener(t,"click",function(){x()});var s=L.DomUtil.create("div","leaflet-control-expand-map-interior",t);return s.title="Expand map to the fullpage",t}});v.addControl(new _),$(".leaflet-control-expand-map-interior").addClass("leaflet-control-expand");var I=function(s,a){if(s.length>0){var i=L.geoJson(s,{pointToLayer:function(e,t){return"Point"===e.geometry.type?L.circleMarker(t,{radius:10,fillColor:e.properties.color,color:"#7f8c8d",weight:2,opacity:1,fillOpacity:.8}):!1},style:function(e){return a?a:"LineString"===e.geometry.type?{color:e.properties.color,weight:8,opacity:.7}:void 0},onEachFeature:function(t,s){s.on("click",function(){e.filterText=t.properties.objectid,e.$apply(),$("#detailsModal").modal({backdrop:"static"})})}});i.addTo(v),v.fitBounds(i),v.getZoom()>18&&v.setZoom(18),setTimeout(function(){if(null!==t.mapcenter){var e=t.mapcenter,s=e.split(",");v.panTo(L.latLng(Number(s[3]),Number(s[1]))),v.setZoom(18)}},2e3)}},T=function(e){return L.geoJson(e,{onEachFeature:function(e,s){if("Point"===e.geometry.type&&null!==t.extent&&"null"!==t.extent){var a=.3048*t.extent,i=L.circle([e.geometry.coordinates[1],e.geometry.coordinates[0]],a,{color:"#3498db",fillOpacity:0,opacity:.8,clickable:!1});i.addTo(v),s.on("click",function(){})}},pointToLayer:function(e,t){return L.circleMarker(t,{radius:4,fillColor:"#3498db",color:"#3498db",weight:2,opacity:1,fillOpacity:.8,clickable:!1})}})},P=function(e,t){var s=L.geoJson(e,{style:function(e){return t?t:void 0},onEachFeature:function(e,t){b.addOverlay(t,e.properties.name)}});s.addTo(v)};if(e.onChangeMapCenter=function(e,a,i){var r,o;for(var n in e)e[n]===a?r=n:e[n]===i&&(o=n);var l=r+","+a+","+o+","+i,c=t;c.mapcenter=l,c.view="map",s.transitionTo("main.topics.topic",c,{reload:!0})},t.mapcenter&&null!==t.mapcenter){var C=t.mapcenter.split(",");console.log(C),L.marker([Number(C[3]),Number(C[1])]).addTo(v)}e.loading=!0,e.emailSubject="",e.emailBodyText="",o.query().then(function(s){r.buildTopic().then(function(s){if(e.topic=s,e.loading=!1,s.searchGeojson&&T(s.searchGeojson).addTo(v),s.overlays){P(s.overlays,{fillOpacity:1,opacity:1})}if(s.features)if(null!==t.type||"null"!==t.type){var i=a("filter")(s.features,t.type,!0);I(i)}else I(s);var r="";r=void 0!==e.topic.features?e.topic.features.length>1?e.topicProperties.plural:"the "+e.topicProperties.title:e.topicProperties.title,e.emailSearchBy="",e.topicProperties.searchby[t.searchby].prepositions.timeframe&&(e.emailSearchBy=e.emailSearchBy+" "+e.topicProperties.searchby[t.searchby].prepositions.timeframe+" "+e.timeframeOptions[e.timeframeOptionIndex].label),e.topicProperties.searchby[t.searchby].prepositions.extent&&(e.emailSearchBy=e.emailSearchBy+" "+e.topicProperties.searchby[t.searchby].prepositions.extent+" "+e.extentOptions[e.extentOptionIndex].label),e.topicProperties.searchby[t.searchby].prepositions.searchby&&(e.emailSearchBy=e.emailSearchBy+" "+e.topicProperties.searchby[t.searchby].prepositions.searchby+" "+t.searchtext),e.emailSubject="SimpliCity data for "+r+e.emailSearchBy,e.emailBodyText="City of Asheville's SimpliCity: city data simplified%0D%0A%0D%0AClick the link below to view your data.%0D%0A%0D%0A<"+escape(window.location)+">"})}),e.goToTopics=function(){s.go("main.topics.list",{searchtext:t.searchtext,searchby:t.searchby,id:t.id})},e.filterBy=function(s){"summary"===t.view?(l("type",s),l("view","list")):("map"===t.view||"list"===t.view)&&l("type",s),e.filterText=s},e.changeColor=function(e){return{color:e}},e.openDownloadModal=function(){$("#downloadModal").modal({backdrop:!1})},e.downloadGeoJson=function(e,t){var s="data:text/json;charset=utf-8,",a=JSON.stringify(t);s+=a;var i=encodeURI(s);window.open(i)},e.downloadCsv=function(e,t){var s="data:text/csv;charset=utf-8,";if("summary"===e){s+="Type, Count\n";for(var a in t.summary.table){var i=a+","+t.summary.table[a].count;s+=i+"\n"}}else if("complete"===e){var r=[];for(var o in t.features[0].properties)r.push(o);for(var n=[],l=0;l<t.features.length;l++)for(var c=0;c<r.length;c++)if(t.features[l].properties[r[c]]&&t.features[l].properties[r[c]].constructor===Array)for(var p in t.features[l].properties[r[c]][0])n.push(p);for(var d=0;d<n.length;d++)r.push(n[d]);s+=r.join(",")+"\n";for(var m=0;m<t.features.length;m++){for(var u=[],h={},g=0;g<r.length;g++)if(t.features[m].properties[r[g]]){if("string"==typeof t.features[m].properties[r[g]]){for(var f=!1,y=0;y<t.features[m].properties[r[g]].length;y++)","===t.features[m].properties[r[g]].charAt(y)&&(f=!0);u.push(f===!0?'"'+t.features[m].properties[r[g]]+'"':t.features[m].properties[r[g]])}else if("number"==typeof t.features[m].properties[r[g]])u.push(t.features[m].properties[r[g]]);else if(t.features[m].properties[r[g]].constructor===Array){for(var v=0;v<t.features[m].properties[r[g]].length;v++)for(var b in t.features[m].properties[r[g]][v])h[b]=void 0===h[b]?t.features[m].properties[r[g]][v][b]:h[b]+", "+t.features[m].properties[r[g]][v][b];u.push("NULL")}}else u.push(h[r[g]]?h[r[g]]:"NULL");s+=u.join(",")+"\n"}var w=encodeURI(s);window.open(w)}}}]),simplicity.factory("AddressMailingList",["$q","$stateParams","AddressCache","simplicityBackend","COLORS",function(e,t,s,a,i){var r={},o={name:"addressmailinglist",title:"Address Mailing List",plural:"address mailing lists",searchForText:"a street or a neighborhood",position:8,downloadable:!0,searchby:{street_name:{params:{type:null,timeframe:null,extent:82.5,view:"list",validViews:["list","map"]},prepositions:{searchby:"along"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.along.html"},neighborhood:{params:{type:null,timeframe:null,extent:null,view:"list",validViews:["list","map"]},prepositions:{searchby:"in"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.in.html"}},views:{map:{label:"Map View",template:null},list:{label:"List View",template:"topics/topic-components/address-list/address-list.view.html"}},simpleViewTemplate:null,detailsViewTemplate:null,tableViewTemplate:"topics/topic-components/address-list/address-list.table.view.html",listViewTemplate:"topics/topic-components/address-list/address-list.view.html",defaultView:"simple",iconClass:"flaticon-email20",linkTopics:["property"],questions:{topic:"Do you want a mailing lists?",street_name:"Do you want a mailing list of addresses for residents along this street?",neighborhood:"Do you want a mailing list of addresses for residents in this neighborhood?"}};return r.build=function(){var i=e.defer(),r=s.get(),o=s.civicaddressIdArray();return"street_name"===t.searchby?a.simplicityQuery("addresses",{civicaddressIds:o.join(",")}).then(function(e){for(var t=[],s=0;s<e.features.length;s++){var a={objectid:e.features[s].properties.objectid,street_number:e.features[s].properties.street_number,street_name:e.features[s].properties.street_name,street_type:e.features[s].properties.street_type,unit_number:e.features[s].properties.unit_number,zip_code:e.features[s].properties.zip_code};e.features[s].properties=a,t.push(e.features[s])}var o={type:"FeatureCollection",summary:{},searchGeojson:r.searchGeojson,features:t};i.resolve(o)}):"neighborhood"===t.searchby&&a.simplicityQuery("addresses",{neighborhoodName:t.id}).then(function(e){for(var t=[],s=0;s<e.features.length;s++){var a={objectid:e.features[s].properties.objectid,street_number:e.features[s].properties.street_number,street_name:e.features[s].properties.street_name,street_type:e.features[s].properties.street_type,unit_number:e.features[s].properties.unit_number,zip_code:e.features[s].properties.zip_code};e.features[s].properties=a,t.push(e.features[s])}var o={type:"FeatureCollection",summary:{},searchGeojson:r.searchGeojson,features:t};i.resolve(o)}),i.promise},r.getTopicProperties=function(){return o},r}]),simplicity.factory("AddressList",["$q","$stateParams","AddressCache","simplicityBackend","COLORS",function(e,t,s,a,i){var r={},o={name:"addresslist",title:"Address List",plural:"address lists",searchForText:"a street or a neighborhood",position:8,downloadable:!0,searchby:{street_name:{params:{type:null,timeframe:null,extent:82.5,view:"list",validViews:["list","map"]},prepositions:{searchby:"along"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.along.html"},neighborhood:{params:{type:null,timeframe:null,extent:null,view:"list",validViews:["list","map"]},prepositions:{searchby:"in"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.in.html"}},views:{map:{label:"Map View",template:null},list:{label:"List View",template:"topics/topic-components/address-list/address-list.view.html"}},simpleViewTemplate:null,detailsViewTemplate:null,tableViewTemplate:"topics/topic-components/address-list/address-list.table.view.html",listViewTemplate:"topics/topic-components/address-list/address-list.view.html",defaultView:"simple",iconClass:"flaticon-purchase1",linkTopics:["property"],questions:{topic:"Do you want a list of addresses?",street_name:"Do you want a list of addresses along this street?",neighborhood:"Do you want a list of addresses in this neighborhood?"}};return r.build=function(){var i=e.defer(),r=s.get(),o=s.civicaddressIdArray();return"street_name"===t.searchby?a.simplicityQuery("addresses",{civicaddressIds:o.join(",")}).then(function(e){for(var t=[],s=0;s<e.features.length;s++)e.features[s].properties.isincity=r.inTheCity[e.features[s].properties.civicaddress_id]?r.inTheCity[e.features[s].properties.civicaddress_id]:!1,e.features[s].properties.color="035096",t.push(e.features[s]);var a={type:"FeatureCollection",summary:{},searchGeojson:r.searchGeojson,features:t};i.resolve(a)}):"neighborhood"===t.searchby&&a.simplicityQuery("addresses",{neighborhoodName:t.id}).then(function(e){for(var t=[],s=0;s<e.features.length;s++)e.features[s].properties.color="035096",t.push(e.features[s]);var a={type:"FeatureCollection",summary:{},searchGeojson:r.searchGeojson,features:t};i.resolve(a)}),i.promise},r.getTopicProperties=function(){return o},r}]),simplicity.factory("Crime",["$http","$location","$q","$filter","$stateParams","AddressCache","simplicityBackend","TimeFrame","COLORS","DESCRIPTIONS",function(e,t,s,a,i,r,o,n,l,c){var p={},d={name:"crime",title:"Crime",plural:"crimes",searchForText:"an address, street, or neighborhood",position:2,downloadable:!0,searchby:{address:{params:{type:null,timeframe:"last-year",extent:660,view:"summary",validViews:["summary","list","map"]},prepositions:{timeframe:"during",extent:"within",searchby:"of"},requiredParams:["timeframe","extent"],headerTemplate:"topics/topic-headers/topic.header.during.within.of.html"},google_places:{params:{type:null,timeframe:"last-year",extent:660,view:"summary",validViews:["summary","list","map"]},prepositions:{timeframe:"during",extent:"within",searchby:"of"},requiredParams:["timeframe","extent"],headerTemplate:"topics/topic-headers/topic.header.during.within.of.html"},street_name:{params:{type:null,timeframe:"last-year",extent:82.5,view:"summary",validViews:["summary","list","map"]},prepositions:{timeframe:"during",searchby:"along"},requiredParams:["timeframe"],headerTemplate:"topics/topic-headers/topic.header.during.along.html"},neighborhood:{params:{type:null,timeframe:"last-year",extent:null,defaultView:"summary",validViews:["summary","list","map"]},prepositions:{timeframe:"during",searchby:"in"},requiredParams:["timeframe"],headerTemplate:"topics/topic-headers/topic.header.during.in.html"}},views:{map:{label:"Map View",template:null},summary:{label:"Summary",template:"topics/topic-components/crime/crime.summary.view.html"},list:{label:"Details View",template:"topics/topic-components/crime/crime.list.view.html"}},iconClass:"flaticon-police19",linkTopics:["property","trash","recycling","development"],questions:{topic:"Do you want to know about crime?",address:"Do you want to know about crimes near this address?",street_name:"Do you want to know about crimes along this street?",neighborhood:"Do you want to know about crimes in this neighborhood?"}},m=function(e){for(var t=r.get(),s={template:"summary",table:{}},a=[],i=0;i<e.features.length;i++)e.features[i].properties.color=l.crime[e.features[i].properties.offense],e.features[i].properties.description=c.crime[e.features[i].properties.offense],void 0===s.table[e.features[i].properties.offense]?s.table[e.features[i].properties.offense]={color:l.crime[e.features[i].properties.offense],count:1,description:c.crime[e.features[i].properties.offense]}:s.table[e.features[i].properties.offense].count=s.table[e.features[i].properties.offense].count+1,a.push(e.features[i]);var o={type:"FeatureCollection",summary:s,searchGeojson:t.searchGeojson,features:a};return o};return p.build=function(){var e=s.defer(),t=new Date(n.get(i.timeframe)),a=o.formatTimeForQuery(t),l=r.get();if(l||"neighborhood"===i.searchby){var c={};"neighborhood"===i.searchby?(c={neighborhoodName:i.id,time:a},o.simplicityQuery("crimes",c).then(function(t){e.resolve(m(t))})):l.crime&&l.crime[Number(i.extent)]?(c={crimeIds:l.crime[Number(i.extent)],time:a},o.simplicityQuery("crimes",c).then(function(t){e.resolve(m(t))})):e.resolve(m({features:[]}))}else e.resolve(m({features:[]}));return e.promise},p.getTopicProperties=function(){return d},p}]),simplicity.factory("Development",["$http","$location","$q","$filter","$stateParams","AddressCache","simplicityBackend","TimeFrame","COLORS","DESCRIPTIONS",function(e,t,s,a,i,r,o,n,l,c){var p={},d={name:"development",title:"Development",plural:"development",searchForText:"an address, street, or neighborhood",position:3,downloadable:!0,searchby:{address:{params:{type:null,timeframe:"last-year",extent:660,view:"summary",validViews:["summary","list","map"]},prepositions:{timeframe:"during",extent:"within",searchby:"of"},requiredParams:["timeframe","extent"],headerTemplate:"topics/topic-headers/topic.header.during.within.of.html"},google_places:{params:{type:null,timeframe:"last-year",extent:660,view:"summary",validViews:["summary","list","map"]},prepositions:{timeframe:"during",extent:"within",searchby:"of"},requiredParams:["timeframe","extent"],headerTemplate:"topics/topic-headers/topic.header.during.within.of.html"},street_name:{params:{type:null,timeframe:"last-year",extent:82.5,view:"summary",validViews:["summary","list","map"]},prepositions:{timeframe:"during",searchby:"along"},requiredParams:["timeframe"],headerTemplate:"topics/topic-headers/topic.header.during.along.html"},neighborhood:{params:{type:null,timeframe:"last-year",extent:null,defaultView:"summary",validViews:["summary","list","map"]},prepositions:{timeframe:"during",searchby:"in"},requiredParams:["timeframe"],headerTemplate:"topics/topic-headers/topic.header.during.in.html"}},views:{map:{label:"Map View",template:null},summary:{label:"Summary",template:"topics/topic-components/development/development.summary.view.html"},list:{label:"Details View",template:"topics/topic-components/development/development.list.view.html"}},iconClass:"flaticon-building33",linkTopics:["property","trash","recycling","crime"],questions:{topic:"Do you want to know about development?",address:"Do you want to know about development near this address?",street_name:"Do you want to know about development along this street?",neighborhood:"Do you want to know about development in this neighborhood?"}},m=function(e){for(var t=r.get(),s={template:"summary",table:{}},a=[],i=0;i<e.features.length;i++)e.features[i].properties.color=l.development[e.features[i].properties.record_type],e.features[i].properties.description=c.development[e.features[i].properties.record_type],void 0===s.table[e.features[i].properties.record_type]?s.table[e.features[i].properties.record_type]={color:l.development[e.features[i].properties.record_type],count:1,description:c.development[e.features[i].properties.record_type]}:s.table[e.features[i].properties.record_type].count=s.table[e.features[i].properties.record_type].count+1,e.features[i].properties.record_comments&&(e.features[i].properties.commentsArray=e.features[i].properties.record_comments.split("[NEXT-COMMENT]")),a.push(e.features[i]);var o={type:"FeatureCollection",summary:s,searchGeojson:t.searchGeojson,features:a};return o};return p.build=function(){var e=s.defer(),t=new Date(n.get(i.timeframe)),a=o.formatTimeForQuery(t),l=r.get();if(l||"neighborhood"===i.searchby){var c={};if("neighborhood"===i.searchby)c={neighborhoodName:i.id,time:a},o.simplicityQuery("development",c).then(function(t){e.resolve(m(t))});else if(l.development)if(l.development[Number(i.extent)]){for(var p="",d=0;d<l.development[i.extent].length;d++)p=0===d?p+"'"+l.development[i.extent][d]+"'":p+",'"+l.development[i.extent][d]+"'";c={permitIds:p,time:a},o.simplicityQuery("development",c).then(function(t){e.resolve(m(t))})}else e.resolve(m({features:[]}));else e.resolve(m({features:[]}))}else e.resolve(m({features:[]}));return e.promise},p.getTopicProperties=function(){return d},p}]),simplicity.factory("Owner",["$http","$location","$q","$filter","$stateParams","AddressCache","simplicityBackend","COLORS","CODELINKS",function(e,t,s,a,i,r,o,n,l){var c={},p={name:"owner",plural:"owners",title:"Owner",searchForText:"an address, street, owner, or PIN",position:9,downloadable:!0,searchby:{address:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"details",validViews:["details","map"]},prepositions:{searchby:"at"},headerTemplate:"topics/topic-headers/topic.header.at.html"},google_places:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"details",validViews:["details","map"]},prepositions:{searchby:"at"},headerTemplate:"topics/topic-headers/topic.header.at.html"},street_name:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"list",validViews:["list","map"]},prepositions:{searchby:"along"},headerTemplate:"topics/topic-headers/topic.header.along.html"},neighborhood:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"details",validViews:["details","map"]},prepositions:{searchby:"in"},headerTemplate:"topics/topic-headers/topic.header.in.html"}},views:{map:{label:"Map View",template:null},details:{label:"Details View",template:"topics/topic-components/owner/owner.details.view.html"},list:{label:"List View",template:"topics/topic-components/owner/owner.list.view.html"}},iconClass:"flaticon-purchase1",linkTopics:["crime","trash","recycling"],questions:{topic:"Do you want to know about property owners' addresses?",address:"Do you want to know the property owner's address at this address?",street_name:"Do you want a list of property owners' addresses along this street?",pinnum:"Do you want to know the property owner's address for this PIN?",neighborhood:"Do you want a list of property owners' addresses in this neighborhood?"}};return c.build=function(){var e=(r.get(),r.pinnum2civicaddressid(),s.defer());if("address"===i.searchby)o.simplicityQuery("xrefs",{civicaddressId:Number(i.id)}).then(function(t){o.simplicityQuery("owners",{pinnum:t.features[0].properties.pinnum}).then(function(t){e.resolve(t)})});else if("street_name"===i.searchby){for(var t=i.id.split(","),a=0;a<t.length;a++)t[a]=Number(t[a]);o.simplicityQuery("xrefs",{centerlineIds:t.join()}).then(function(t){for(var s="",a=0;a<t.features.length;a++)s=0===a?s+"'"+t.features[a].properties.pinnum+"'":s+",'"+t.features[a].properties.pinnum+"'";o.simplicityQuery("owners",{pinnums:s}).then(function(t){e.resolve(t)})})}else if("pinnum"===i.searchby||"owner_name"===i.searchby){for(var n=i.id.split(","),l="",c=0;c<n.length;c++)l=0===c?l+"'"+n[c]+"'":l+",'"+n[c]+"'";o.simplicityQuery("owners",{pinnums:l}).then(function(t){e.resolve(t)})}else"neighborhood"===i.searchby&&o.simplicityQuery("owners",{neighborhoodName:i.id}).then(function(t){e.resolve(t)});return e.promise},c.getTopicProperties=function(){return p},c}]),simplicity.factory("OwnerMailingList",["$http","$location","$q","$filter","$stateParams","AddressCache","simplicityBackend","COLORS","CODELINKS",function(e,t,s,a,i,r,o,n,l){var c={},p={name:"ownermailinglist",plural:"owners mailing list",title:"Owner Mailing List",searchForText:"an address, street, owner, or PIN",position:9,downloadable:!0,searchby:{street_name:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"list",validViews:["list","map"]},prepositions:{searchby:"along"},headerTemplate:"topics/topic-headers/topic.header.along.html"},neighborhood:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"details",validViews:["details","map"]},prepositions:{searchby:"in"},headerTemplate:"topics/topic-headers/topic.header.in.html"}},views:{map:{label:"Map View",template:null},details:{label:"Details View",template:"topics/topic-components/owner/owner.details.view.html"},list:{label:"List View",template:"topics/topic-components/owner/owner.list.view.html"}},iconClass:"flaticon-email20",linkTopics:["crime","trash","recycling"],questions:{topic:"Do you want a mailing list of property owners?",street_name:"Do you want a mailing list of property owners' addresses along this street?",neighborhood:"Do you want a mailing list of property owners' addresses in this neighborhood?"}};return c.build=function(){var e=(r.get(),r.pinnum2civicaddressid(),s.defer());if("address"===i.searchby)o.simplicityQuery("xrefs",{civicaddressId:Number(i.id)}).then(function(t){o.simplicityQuery("owners",{pinnum:t.features[0].properties.pinnum}).then(function(t){e.resolve(t)})});else if("street_name"===i.searchby){for(var t=i.id.split(","),a=0;a<t.length;a++)t[a]=Number(t[a]);o.simplicityQuery("xrefs",{centerlineIds:t.join()}).then(function(t){for(var s="",a=0;a<t.features.length;a++)s=0===a?s+"'"+t.features[a].properties.pinnum+"'":s+",'"+t.features[a].properties.pinnum+"'";o.simplicityQuery("owners",{pinnums:s}).then(function(t){e.resolve(t)})})}else if("pinnum"===i.searchby||"owner_name"===i.searchby){for(var n=i.id.split(","),l="",c=0;c<n.length;c++)l=0===c?l+"'"+n[c]+"'":l+",'"+n[c]+"'";o.simplicityQuery("owners",{pinnums:l}).then(function(t){e.resolve(t)})}else"neighborhood"===i.searchby&&o.simplicityQuery("owners",{neighborhoodName:i.id}).then(function(t){e.resolve(t)});return e.promise},c.getTopicProperties=function(){return p},c}]),simplicity.factory("Property",["$http","$location","$q","$filter","$stateParams","AddressCache","simplicityBackend","COLORS","CODELINKS",function(e,t,s,a,i,r,o,n,l){var c={},p={name:"property",plural:"properties",title:"Property",searchForText:"an address, street, owner, or PIN",position:1,downloadable:!0,searchby:{address:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"details",validViews:["details","map"]},prepositions:{searchby:"at"},headerTemplate:"topics/topic-headers/topic.header.at.html"},google_places:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"details",validViews:["details","map"]},prepositions:{searchby:"at"},headerTemplate:"topics/topic-headers/topic.header.at.html"},street_name:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"list",validViews:["list","map"]},prepositions:{searchby:"along"},headerTemplate:"topics/topic-headers/topic.header.along.html"},pinnum:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"details",validViews:["details","map"]},prepositions:{searchby:"at"},headerTemplate:"topics/topic-headers/topic.header.at.html"},owner_name:{params:{type:null,timeframe:null,extent:null,centermap:null,view:"list",validViews:["list","map"]},prepositions:{searchby:"owned by"},headerTemplate:"topics/topic-headers/topic.header.ownedby.html"}},views:{map:{label:"Map View",template:null},details:{label:"Details View",template:"topics/topic-components/property/property.details.view.html"},list:{label:"List View",template:"topics/topic-components/property/property.list.view.html"}},iconClass:"flaticon-house112",linkTopics:["crime","trash","recycling"],questions:{topic:"Do you want to know about a property?",address:"Do you want to know about the property at this address?",street_name:"Do you want to know about the properties along this street?",pinnum:"Do you want to know about the property for this PIN?",owner_name:"Do you want to know about the properties owned by this owner?"}},d=function(){for(var e=r.get(),t=(r.pinnum2civicaddressid(),[]),s=0;s<e.zoning.length;s++){var a=e.zoning[s];t.push(void 0===l[a]?{zoningDistrict:a,codelink:"disable"}:{zoningDistrict:a,codelink:l[a]})}return t},m=function(e){var t=r.get(),s=(r.pinnum2civicaddressid(),[]);if(t.zoning[e]){for(var a=0;a<t.zoning[e].length;a++){var i=t.zoning[e][a];s.push(void 0===l[i]?{zoningDistrict:i,codelink:"disable"}:{zoningDistrict:i,codelink:l[i]})}return s}return void 0},u=function(e){var t=r.get(),a=r.pinnum2civicaddressid(),n=s.defer();e.features.length>1&&(e.searchGeojson=t.searchGeojson);for(var l=0;l<e.features.length;l++)if("address"===i.searchby?(e.features[l].properties.civicaddress_id=i.id,t.zoning&&(e.features[l].properties.zoning=d())):("pinnum"===i.searchby||"owner_name"===i.searchby||"street_name"===i.searchby)&&(e.features[l].properties.civicaddress_id=a[e.features[l].properties.pinnum],t.zoning&&(e.features[l].properties.zoning=m(e.features[l].properties.civicaddress_id))),e.features[l].properties.googleDirectionsLink="http://maps.google.com/maps?daddr="+e.features[l].properties.center_y+","+e.features[l].properties.center_x,e.features[l].properties.color="035096",e.features[l].properties.zoningOverlays=t.zoningOverlays,t.zoningOverlays){var c=t.zoningOverlays.split("-");o.simplicityQuery("zoningOverlays",{zoningOverlayName:c[0]}).then(function(t){e.overlays=t,n.resolve(e)})}else n.resolve(e);return n.promise};return c.build=function(){var e=(r.get(),r.pinnum2civicaddressid(),s.defer());if("address"===i.searchby)o.simplicityQuery("xrefs",{civicaddressId:Number(i.id)}).then(function(t){o.simplicityQuery("properties",{pinnum:t.features[0].properties.pinnum}).then(function(t){e.resolve(u(t))})});else if("street_name"===i.searchby){for(var t=i.id.split(","),a=0;a<t.length;a++)t[a]=Number(t[a]);o.simplicityQuery("xrefs",{centerlineIds:t.join()}).then(function(t){for(var s="",a=0;a<t.features.length;a++)s=0===a?s+"'"+t.features[a].properties.pinnum+"'":s+",'"+t.features[a].properties.pinnum+"'";o.simplicityQuery("properties",{pinnums:s}).then(function(t){e.resolve(u(t))})})}else if("pinnum"===i.searchby||"owner_name"===i.searchby){for(var n=i.id.split(","),l="",c=0;c<n.length;c++)l=0===c?l+"'"+n[c]+"'":l+",'"+n[c]+"'";o.simplicityQuery("properties",{pinnums:l}).then(function(t){e.resolve(u(t))})}return e.promise},c.getTopicProperties=function(){return p},c}]),simplicity.factory("Recycling",["$q","$stateParams","AddressCache",function(e,t,s){var a={},i={name:"recycling",title:"Recycling Collection",plural:"recycling collection",searchForText:"an address",position:5,downloadable:!1,searchby:{address:{params:{type:null,timeframe:null,extent:null,view:"simple",validViews:["simple"]},prepositions:{searchby:"at"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.at.html"},google_places:{params:{type:null,timeframe:null,extent:null,view:"simple",validViews:["simple"]},prepositions:{searchby:"at"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.at.html"}},views:{simple:{label:"Simple View",template:"topics/topic-components/recycling-collection/recycling.collection.simple.view.html"}},iconClass:"flaticon-trash42",linkTopics:["trash","property"],questions:{topic:"Do you want to know when recycling is collected?",address:"Do you want to know when recycling is collected at this address?"}},r=function(){var e=new Date,t=e.getTime()-2592e5,s=Math.floor(t/6048e5),a=s%2;return 0===a?"B":"A"};return a.build=function(){var t=e.defer(),a=s.get(),i=a.recycling.split(" "),o=(r(),{recyclingDay:a.recycling,searchGeojson:a.searchGeojson});return o.recyclingSchedule="A)"===i[3]?"A"===r()?{week:"A",when:"this week"}:{week:"A",when:"next week"}:"B"===r()?{week:"B",when:"this week"}:{week:"B",when:"next week"},t.resolve(o),t.promise},a.getTopicProperties=function(){return i},a}]),simplicity.factory("StreetMaintenance",["$q","$stateParams","AddressCache","simplicityBackend","COLORS","STREET_MAINTENANCE_CONTACTS","STREET_MAINTENANCE_CITIZEN_SERVICE_REQUESTS",function(e,t,s,a,i,r,o){var n={},l={name:"streetmaintenance",title:"Street Maintenance",plural:"street maintenance responsibility",searchForText:"an address or a street",position:7,downloadable:!0,searchby:{address:{params:{type:null,timeframe:null,extent:null,view:"list",validViews:["list","map"]},prepositions:{searchby:"at"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.at.html"},google_places:{params:{type:null,timeframe:null,extent:null,view:"list",validViews:["list","map"]},prepositions:{searchby:"at"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.at.html"},street_name:{params:{type:null,timeframe:null,extent:82.5,view:"list",validViews:["list","map"]},prepositions:{searchby:"along"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.along.html"}},views:{map:{label:"Map View",template:null},list:{label:"Details View",template:"topics/topic-components/street-maintenance/street.maintenance.list.view.html"}},defaultView:"list",iconClass:"flaticon-shovel1",linkTopics:["property"],questions:{topic:"Do you want to know who is responsible for maintaining a street?",address:"Do you want to know who is responsible for maintaining the street at this address?",street_name:"Do you want to know who is responsible for maintaining this street?"}},c=function(t){var n=e.defer(),l=s.get();return a.simplicityQuery("streets",{centerlineIds:t}).then(function(e){for(var t=[],s={},a=0;a<e.features.length;a++)"UNKOWN"===e.features[a].properties.street_responsibility&&(e.features[a].properties.street_responsibility="UNKNOWN"),s[e.features[a].properties.street_responsibility]||(s[e.features[a].properties.street_responsibility]=i.streetmaintenance[e.features[a].properties.street_responsibility]),e.features[a].properties.street_responsibility_contact=r[e.features[a].properties.street_responsibility],e.features[a].properties.street_responsibility_citizen_service_requests=o[e.features[a].properties.street_responsibility],e.features[a].properties.color=i.streetmaintenance[e.features[a].properties.street_responsibility].color,t.push(e.features[a]);var c={table:s},p={type:"FeatureCollection",summary:c,searchGeojson:l.searchGeojson,features:t};n.resolve(p)}),n.promise};return n.build=function(){var s=e.defer();return"street_name"===t.searchby?s.resolve(c(t.id)):"address"===t.searchby&&a.simplicityQuery("xrefs",{civicaddressId:t.id}).then(function(e){for(var t=[],a=0;a<e.features.length;a++)t.push(e.features[a].properties.centerline_id);s.resolve(c(t.join(",")))}),s.promise},n.getTopicProperties=function(){return l},n}]),simplicity.factory("Trash",["$q","$stateParams","AddressCache",function(e,t,s){var a={},i={name:"trash",title:"Trash Collection",plural:"trash collection",searchForText:"an address",position:4,downloadable:!1,searchby:{address:{params:{type:null,timeframe:null,extent:null,view:"simple",validViews:["simple"]},prepositions:{searchby:"at"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.at.html"},google_places:{params:{type:null,timeframe:null,extent:null,view:"simple",validViews:["simple"]},prepositions:{searchby:"at"},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.at.html"}},views:{simple:{label:"Simple View",template:"topics/topic-components/trash-collection/trash.collection.simple.view.html"}},simpleViewTemplate:"topics/topic-components/trash-collection/trash-collection.view.html",iconClass:"flaticon-garbage5",linkTopics:["recycling","property"],questions:{
topic:"Do you want to know when trash is collected?",address:"Do you want to know when trash is collected at this address?"}};return a.build=function(){var t=s.get(),a=e.defer(),i={trash:t.trash,searchGeojson:t.searchGeojson};return a.resolve(i),a.promise},a.getTopicProperties=function(){return i},a}]),simplicity.factory("Zoning",["$q","$stateParams","AddressCache","simplicityBackend","CODELINKS",function(e,t,s,a,i){var r={},o={name:"zoning",title:"Zoning",plural:"zoning",searchForText:"an address",position:6,downloadable:!1,searchby:{address:{params:{type:null,timeframe:null,extent:null,view:"simple",validViews:["simple"]},requiredParams:[],headerTemplate:"topics/topic-headers/topic.header.at.html"}},views:{simple:{label:"Simple View",template:"topics/topic-components/zoning/zoning.view.html"}},iconClass:"flaticon-map104",linkTopics:["property","crime","development"],questions:{topic:"Do you want to know about a zoning?",address:"Do you want to know about the zoning at this address?"}},n=function(){var e=s.get(),t=(s.pinnum2civicaddressid(),[]);if(e.zoning)for(var a=0;a<e.zoning.length;a++){var r=e.zoning[a];t.push(void 0===i[r]?{zoningDistrict:r,codelink:"disable"}:{zoningDistrict:r,codelink:i[r]})}return t};return r.build=function(){var t,r=e.defer(),o=s.get();t=void 0===i[o.zoning]?"disable":i[o.zoning];var l={type:"FeatureCollection",summary:{},searchGeojson:o.searchGeojson,features:[{type:"Feature",properties:{zoning:n(),zoningOverlays:o.zoningOverlays},geometry:{type:"Point",coordinates:[o.searchGeojson.features[0].geometry.coordinates[0],o.searchGeojson.features[0].geometry.coordinates[1]]}}]};if(o.zoningOverlays){var c=o.zoningOverlays.split("-");a.simplicityQuery("zoningOverlays",{zoningOverlayName:c[0]}).then(function(e){l.overlays=e,r.resolve(l)})}else r.resolve(l);return r.promise},r.getTopicProperties=function(){return o},r}]),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("main/main.html",'<div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2"><div class="col-xs-12"><div class="col-xs-6"><div class="pull-left" analytics-on="click" analytics-category="Navigation" analytics-event="SimpliCity Logo" ng-click="goHome()" style="cursor : pointer"><h2 style="color : #073F97;" class="text-center">SimpliCity</h2><h5 class="text-center">city data simplified</h5></div></div><div class="col-xs-6" style="margin-top : 10px"><a href="http://www.ashevillenc.gov/" target="_blank" analytics-category="Navigation" analytics-on="click" analytics-event="City Logo"><img class="pull-right" style="height : 80px;" src="http://123graffitifree.com/images/citylogo-flatblue.png"></a></div></div><div><input id="stupid-required-google-input" type="hidden"></div><div ui-view=""></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("search/search.html",'<div ui-view=""></div><div id="searchContent"><div class="col-xs-12" style="margin-top : 20px"><p class="text-muted text-center lead" style="margin-bottom : 0px; margin-top : 20px">Discover city data about <strong>{{discoverText}}</strong> in your community.</p><p class="text-muted text-center lead">Search for {{searchFor}} to get started!</p></div><div class="col-xs-12"><div class="input-group"><input id="inputSearch" groupindex="1" type="text" autocomplete="on" class="form-control" placeholder="Enter a location..." style="z-index: 0" ng-model="searchText" ng-keyup="doSearch(searchText, $event)" autofocus=""> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="box-shadow : none; font-size : 17px"><i class="fa fa-search"></i></button></span></div></div><div class="" ng-show="errorMessage.show || helperMessage.show || searchGroups.length > 0"><p ng-show="errorMessage.show" class="text-danger">{{errorMessage.message}}</p><p ng-show="helperMessage.show" class="text-success">{{helperMessage.message}}</p><div ng-repeat="group in searchGroups"><div class="col-xs-12" style="margin-top : 10px; margin-bottom : 10px"><h4 class="row text-muted"><span class="fa-stack fa-lg" ng-click="goBack()"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse" ng-class="group.iconClass"></i></span> <strong>{{group.label}}</strong> <span class="badge" style="background : #999">{{group.results.length}}</span> <span ng-if="group.name === \'google_places\'"><img src="images/powered-by-google-on-white.png" alt="" class="pull-right" style="padding : 20px"></span></h4><div class="list-group" ng-repeat="candidate in group.results | limitTo : group.offset"><a analytics-on="click" analytics-category="Search" analytics-label="{{candidate.type}}" analytics-event="{{candidate.label}}" ng-click="goToTopics(candidate, $event)" ng-keypress="goToTopics(candidate, $event)" class="row list-group-item"><span class="col-xs-2 col-lg-1"><span class="fa-stack fa-lg text-primary"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse" ng-class="group.iconClass"></i></span></span><p class="col-xs-8 col-lg-9 pull-left text-primary" style="margin-top : 8px">{{candidate.label}}</p><h4 class="col-xs-2 col-lg-2"><i class="fa fa-lg fa-chevron-right text-primary pull-right"></i></h4></a></div><div class="list-group" ng-if="group.results.length > 3"><a ng-click="group.offset = group.offset + 3" class="row list-group-item"><h4 class="col-xs-10 text-primary"><strong>More</strong></h4><h4 class="col-xs-2"><i class="fa fa-lg fa-chevron-down text-primary pull-right"></i></h4></a></div></div></div><p ng-show="errorMessage.show" class="text-danger">{{errorMessage.message}}</p></div><div ng-show="showTopicsLink" class="col-xs-12 col-md-6 col-md-offset-3 text-center well" style="margin-top : 60px; margin-bottom : 40px; background : #fff; border : 2px solid #ecf0f1"><h4 class="text-info">Not sure what you can find with SimpliCity?</h4><a href="#/topics/list"><h2>Click here to view topics</h2></a></div><div class="col-xs-12" style="margin-top : 50px"><h4 class="text-primary text-center">Brought to you by the <a href="http://www.ashevillenc.gov/" target="_blank">City of Asheville</a> <i class="fa fa-smile-o"></i></h4></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/sanitation.card.html",'<div class="col-xs-12 list-item-panel"><div class="col-xs-12" style="padding : 10px"><h4>Trash</h4><p>Your trash is collected every <strong>{{card.trash}}</strong>.</p><br><h4>Recycling</h4><p class="text-muted">Recycling is collected every other week.</p><p>Your recycling will be collected <strong>{{card.recyclingSchedule.when}} on {{card.recycling}}</strong>.</p><br><h4>Brush and Leaf Collection</h4><p class="text-muted">Brush and leaves are collected every other week, and should be placed at the curb by 7 a.m. on Monday of your pickup week.</p><p>Your brush will be collected <strong>{{card.brushSchedule.when}}</strong>.</p><br><h4>Bulky Item Collection</h4><p>Call to schedule pickup <a href="tel:8282511122" target="_blank">(828) 251-1122</a>. <a href="http://www.ashevillenc.gov/Departments/Sanitation/BulkyItemCollection.aspx" target="_blank">More Info.</a></p></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-headers/topic.header.along.html",'<div class="list-item-panel col-xs-12"><h1 class="col-xs-6">{{topicProperties.title}}</h1><div class="col-xs-6"><a style="padding : 10px" class="pull-right text-center" ng-if="topicProperties.downloadable" ng-click="openDownloadModal()"><i class="fa fa-download"></i><br>Download</a> <a style="padding : 10px" class="pull-right text-center" title="Email of link to this page" href="mailto:?subject={{emailSubject}}&body={{emailBodyText}}"><i class="fa fa-envelope-o text-center"></i><br>Email</a></div><form class="form-horizontal col-xs-12"><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">along</strong></h3></label><div class="col-sm-10"><h3 class="form-control-static" style="margin : 0px">{{stateParams.searchtext}}.</h3></div></div></form></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-headers/topic.header.at.html",'<div class="list-item-panel col-xs-12"><h1 class="col-xs-6">{{topicProperties.title}}</h1><div class="col-xs-6"><a style="padding : 10px" class="pull-right text-center" ng-if="topicProperties.downloadable" ng-click="openDownloadModal()"><i class="fa fa-download"></i><br>Download</a> <a style="padding : 10px" class="pull-right text-center" title="Email of link to this page" href="mailto:?subject={{emailSubject}}&body={{emailBodyText}}"><i class="fa fa-envelope-o text-center"></i><br>Email</a></div><form class="form-horizontal col-xs-12"><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">at</strong></h3></label><div class="col-sm-10"><h3 class="form-control-static" style="margin : 0px">{{stateParams.searchtext}}.</h3></div></div></form></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-headers/topic.header.during.along.html",'<div class="list-item-panel col-xs-12"><h1 class="col-xs-6">{{topicProperties.title}}</h1><div class="col-xs-6"><a style="padding : 10px" class="pull-right text-center" ng-if="topicProperties.downloadable" ng-click="openDownloadModal()"><i class="fa fa-download"></i><br>Download</a> <a style="padding : 10px" class="pull-right text-center" title="Email of link to this page" href="mailto:?subject={{emailSubject}}&body={{emailBodyText}}"><i class="fa fa-envelope-o text-center"></i><br>Email</a></div><form class="form-horizontal col-xs-12"><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">during</strong></h3></label><div class="col-sm-10"><select class="form-control" id="time" ng-init="timeframeValue = timeframeOptions[timeframeOptionIndex]" ng-model="timeframeValue" ng-options="item.label for item in timeframeOptions" ng-change="onChangeTimeframeValue(timeframeValue)" style="font-size : 22px; color : #2780e3; height : 50px" analytics-on="change" analytics-category="Timeframe Change" analytics-label="{{stateParams.topic}}" analytics-event="{{timeframeValue.label}}"></select></div></div><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">along</strong></h3></label><div class="col-sm-10"><h3 class="form-control-static" style="margin : 0px">{{stateParams.searchtext}}.</h3></div></div></form></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-headers/topic.header.during.in.html",'<div class="list-item-panel col-xs-12"><h1 class="col-xs-6">{{topicProperties.title}}</h1><div class="col-xs-6"><a style="padding : 10px" class="pull-right text-center" ng-if="topicProperties.downloadable" ng-click="openDownloadModal()"><i class="fa fa-download"></i><br>Download</a> <a style="padding : 10px" class="pull-right text-center" title="Email of link to this page" href="mailto:?subject={{emailSubject}}&body={{emailBodyText}}"><i class="fa fa-envelope-o text-center"></i><br>Email</a></div><form class="form-horizontal col-xs-12"><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">during</strong></h3></label><div class="col-sm-10"><select class="form-control" id="time" ng-init="timeframeValue = timeframeOptions[timeframeOptionIndex]" ng-model="timeframeValue" ng-options="item.label for item in timeframeOptions" ng-change="onChangeTimeframeValue(timeframeValue)" style="font-size : 22px; color : #2780e3; height : 50px" analytics-on="change" analytics-category="Timeframe Change" analytics-label="{{stateParams.topic}}" analytics-event="{{timeframeValue.label}}"></select></div></div><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">in</strong></h3></label><div class="col-sm-10"><h3 class="form-control-static" style="margin : 0px">{{stateParams.searchtext}} Neighborhood</h3></div></div></form></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-headers/topic.header.during.within.of.html",'<div class="list-item-panel col-xs-12"><h1 class="col-xs-6">{{topicProperties.title}}</h1><div class="col-xs-6"><a style="padding : 10px" class="pull-right text-center" ng-if="topicProperties.downloadable" ng-click="openDownloadModal()"><i class="fa fa-download"></i><br>Download</a> <a style="padding : 10px" class="pull-right text-center" title="Email of link to this page" href="mailto:?subject={{emailSubject}}&body={{emailBodyText}}"><i class="fa fa-envelope-o text-center"></i><br>Email</a></div><form class="form-horizontal col-xs-12"><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">during</strong></h3></label><div class="col-sm-10"><select class="form-control" id="time" ng-init="timeframeValue = timeframeOptions[timeframeOptionIndex]" ng-model="timeframeValue" ng-options="item.label for item in timeframeOptions" ng-change="onChangeTimeframeValue(timeframeValue)" analytics-on="change" analytics-category="Timeframe Change" analytics-label="{{stateParams.topic}}" analytics-event="{{timeframeValue.label}}" style="font-size : 22px; color : #2780e3; height : 50px"></select></div></div><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">within</strong></h3></label><div class="col-sm-10"><select class="form-control" id="extent" ng-init="extentValue = extentOptions[extentOptionIndex]" ng-model="extentValue" ng-options="item.label for item in extentOptions" ng-change="onChangeExtentValue(extentValue)" analytics-on="change" analytics-category="Extent Change" analytics-label="{{stateParams.topic}}" analytics-event="{{extentValue.label}}" style="font-size : 22px; color : #2780e3; height : 50px"></select></div></div><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">of</strong></h3></label><div class="col-sm-10"><h3 class="form-control-static" style="margin : 0px">{{stateParams.searchtext}}.</h3></div></div></form></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-headers/topic.header.in.html",'<div class="list-item-panel col-xs-12"><h1 class="col-xs-6">{{topicProperties.title}}</h1><div class="col-xs-6"><a style="padding : 10px" class="pull-right text-center" ng-if="topicProperties.downloadable" ng-click="openDownloadModal()"><i class="fa fa-download"></i><br>Download</a> <a style="padding : 10px" class="pull-right text-center" title="Email of link to this page" href="mailto:?subject={{emailSubject}}&body={{emailBodyText}}"><i class="fa fa-envelope-o text-center"></i><br>Email</a></div><form class="form-horizontal col-xs-12"><div class="form-group"><label class="col-sm-2 control-label"><h3 style="margin : 0px"><strong class="text-muted">in</strong></h3></label><div class="col-sm-10"><h3 class="form-control-static" style="margin : 0px">{{stateParams.searchtext}} Neighborhood</h3></div></div></form></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-headers/topic.header.ownedby.html",'<div class="list-item-panel col-xs-12"><h1 class="col-xs-6">{{topicProperties.title}}</h1><div class="col-xs-6"><a style="padding : 10px" class="pull-right text-center" ng-if="topicProperties.downloadable" ng-click="openDownloadModal()"><i class="fa fa-download"></i><br>Download</a> <a style="padding : 10px" class="pull-right text-center" title="Email of link to this page" href="mailto:?subject={{emailSubject}}&body={{emailBodyText}}"><i class="fa fa-envelope-o text-center"></i><br>Email</a></div><form class="form-horizontal col-xs-12"><div class="form-group"><label class="col-sm-3 control-label"><h3 style="margin : 0px"><strong class="text-muted">owned by</strong></h3></label><div class="col-sm-9"><h3 class="form-control-static" style="margin : 0px">{{stateParams.searchtext}}.</h3></div></div></form></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-list/topic.list.html",'<div><div class="col-xs-12 btn-group btn-group-justified" style="margin-top : 15px"><a href="#/search/composite" class="btn btn-primary" style="font-size : 18px"><i class="fa fa-search" analytics-category="Navigation" analytics-label="Topics List Page" analytics-event="To Search"></i> Search</a></div><div class="col-xs-12"><hr></div><h2 class="text-muted text-center">{{heading}}</h2><h1 class="text-muted text-center">{{searchText}}</h1><h3 ng-if="anAddress && loading" class="text-muted text-center"><i class="fa fa-lg fa-spinner fa-spin text-muted"></i></h3><h3 ng-if="anAddress && inTheCity && !loading" class="text-muted text-center"><i class="fa fa-lg fa-check-circle text-success"></i> <strong>It\'s in the city!</strong></h3><h3 ng-if="anAddress && !inTheCity && !loading" class="text-muted text-center"><i class="fa fa-lg fa-times-circle text-danger"></i> <strong>It\'s not in the city!</strong></h3><div class="list-group" style="margin-top : 20px"><a class="row list-group-item list-item-panel" href="{{topic.linkTo}}" style="margin-bottom : 5px" ng-repeat="topic in topics |orderBy:\'position\'" analytics-category="\'Topic\'" analytics-label="{{topic.title}}" analytics-event="{{topic.question}}"><span class="visible-xs col-xs-8"><p class="text-primary text-center">{{topic.question}}</p></span> <i ng-class="topic.iconClass" class="visible-xs pull-left col-xs-3 text-primary"></i><div ng-class="topic.iconClass" class="hidden-xs col-sm-2 text-primary"></div><h4 class="hidden-xs col-sm-9 text-primary" style="margin-top : 20px">{{topic.question}}</h4><h4 class="col-sm-1 hidden-xs"><i class="fa fa-2x fa-chevron-right text-primary pull-right"></i></h4></a></div><div class="col-xs-12 text-center">List icon font generated by <a href="http://www.flaticon.com">flaticon.com</a> under <a href="http://creativecommons.org/licenses/by/3.0/">CC</a> by <a href="http://www.freepik.com">Freepik</a> and <a href="http://www.unocha.org">OCHA</a>.</div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-single/topic.single.html",'<div><div class="col-xs-12 btn-group btn-group-justified" style="margin-top : 15px"><a href="#/search/composite" class="btn btn-primary" style="font-size : 18px" analytics-on="click" analytics-category="Navigation" analytics-label="Topics Single Page" analytics-event="To Search"><i class="fa fa-search fa-fw"></i> Search</a> <a ng-click="goToTopics()" class="btn btn-primary" style="font-size : 18px" analytics-on="click" analytics-category="Navigation" analytics-label="Topics Single Page" analytics-event="To Search"><i class="fa fa-bars fa-fw"></i> View Topics</a></div><div class="col-xs-12"><hr></div><div ng-include="headerTemplate"></div><div class="col-xs-12" style="height : 200px; text-align : center; margin-top : 30px" ng-show="loading"><i class="fa fa-5x fa-spinner fa-spin"></i></div><div class="col-xs-12 list-item-panel" ng-show="!loading"><div ng-if="stateParams.view !== \'simple\'"><div class="hidden-xs col-xs-12"><h2 class="pull-left" style="margin-right : 10px">{{topicProperties.views[stateParams.view].label}}</h2><div class="btn-group pull-right" role="group" aria-label="..." style="margin-top : 15px"><button ng-repeat="view in topicProperties.searchby[stateParams.searchby].params.validViews" ng-class="{\'active\' : stateParams.view === view}" ng-click="onClickChangeView(view)" analytics-on="click" analytics-category="Topic View" analytics-label="{{stateParams.topic}}" analytics-event="{{topicProperties.views[view].label}}" class="btn btn-primary">{{topicProperties.views[view].label}}</button><div ng-if="topicParams.view === \'list\' || (topicParams.view === \'map\' || topic.summary !== undefined)" class="btn-group" role="group"><button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">Filter <span class="caret"></span></button><ul class="dropdown-menu" style="z-index : 1001" role="menu" aria-labelledby="dropdownMenu1"><li class="text-primary" role="presentation"><a role="menuitem" tabindex="-1" ng-click="filterBy(null)">Show All</a></li><li ng-repeat="(key, value) in topic.summary.table" class="text-primary" role="presentation"><a role="menuitem" tabindex="-1" ng-click="filterBy(key)">{{key}}</a></li></ul></div></div><div ng-if="stateParams.type !== null" class="col-xs-12"><h5 class="text-muted">Filtered by <strong>{{stateParams.type}}</strong></h5></div></div><div class="visible-xs" style="text-align : center; width : 100%"><h2 class="pull-left" style="margin-right : 10px">{{topicProperties.views[stateParams.view].label}} View</h2><div class="btn-group" role="group" aria-label="..." style="margin-top : 15px"><div class="btn-group" role="group"><button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">Change View <span class="caret"></span></button><ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1"><li ng-repeat="view in topicProperties.searchby[stateParams.searchby].params.validViews" ng-class="{\'active\' : stateParams.view === view}" ng-click="onClickChangeView(view)" analytics-on="click" analytics-category="Topic View" analytics-label="{{stateParams.topic}}" analytics-event="{{topicProperties.views[view].label}} View" class="text-primary" role="presentation"><a role="menuitem" tabindex="-1">{{topicProperties.views[view].label}}</a></li></ul></div><div ng-if="topicParams.view === \'list\' || (topicParams.view === \'map\' || topic.summary !== undefined)" class="btn-group" role="group"><button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">Filter <span class="caret"></span></button><ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1"><li class="text-primary" role="presentation"><a role="menuitem" tabindex="-1" ng-click="filterBy(null)">Show All</a></li><li ng-repeat="(key, value) in topic.summary.table" class="text-primary" role="presentation"><a role="menuitem" tabindex="-1" ng-click="filterBy(key)">{{key}}</a></li></ul></div></div><div class="col-xs-12" style="height : 10px"></div></div></div><div ng-if="topicPropteries.viewTemplates.simple !== null" ng-show="stateParams.view === \'simple\'" ng-include="topicProperties.views.simple.template"></div><div ng-if="topicPropteries.viewTemplates.details !== null" ng-show="stateParams.view === \'details\'" ng-include="topicProperties.views.details.template"></div><div ng-if="topicPropteries.viewTemplates.list !== null" ng-show="stateParams.view === \'list\'" ng-include="topicProperties.views.list.template"></div><div ng-if="topicPropteries.viewTemplates.summary !== null" ng-show="stateParams.view === \'summary\'" ng-include="topicProperties.views.summary.template"></div><div><div ng-show="stateParams.view === \'map\'" class="col-xs-12" style="height : 400px; margin-bottom : 20px;"><div id="map" style="height : 100%; width : 100%;margin : 0px; padding : 0px"><div ng-if="topic.summary.table !== undefined"><h5 ng-init="showLegend = true" ng-show="showLegend" ng-click="showLegend = !showLegend" class="text-primary" style="position : absolute; top : 50px; right : 10px;z-index : 7; cursor : pointer; background : white; padding : 5px; border-radius : 4px; border : 2px solid #2780E3; box-shadow: 0 1px 5px rgba(0,0,0,0.4)"><strong>Legend</strong> <i class="fa fa-expand"></i></h5><div ng-show="!showLegend" style="position : absolute; top : 50px; right : 10px; box-shadow: 0 1px 5px rgba(0,0,0,0.4);background: #fff;border-radius: 5px; z-index : 7; border : 2px solid #2780E3"><div class="col-xs-12"><h4 class="pull-left">Legend</h4><p ng-click="showLegend = !showLegend" class="text-primary pull-right" style="margin-top : 5px; cursor : pointer"><i class="fa fa-2x fa-times"></i></p></div><table ng-if="topic.features.length !== 0" class="table table-hover"><tbody><tr ng-repeat="(key, value) in topic.summary.table"><td ng-click="getDetails(key)" style="cursor : pointer"><i class="fa fa-circle" style="color: #{{value.color}}"></i> {{key}}</td></tr></tbody></table></div></div></div></div><div id="detailsModal" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Location Details</h4></div><div class="modal-body"><div ng-include="topicProperties.views.list.template"></div></div></div></div></div></div></div><div ng-if="linkTopics.length > 0" class="col-xs-12 list-item-panel" style="margin-top : 30px"><h2>Related Links</h2><div class="list-group" style="margin-top : 20px"><a class="row list-group-item list-item-panel" analytics-category="Related Link" analytics-label="{{stateParams.topic}}" analytics-event="{{linkTopic.linkTo}}" href="{{linkTopic.linkTo}}" style="margin-bottom : 5px" ng-repeat="linkTopic in linkTopics"><span class="visible-xs col-xs-8"><p class="text-primary text-center">{{linkTopic.question}}</p></span> <i ng-class="linkTopic.iconClass" class="visible-xs pull-left col-xs-3 text-primary"></i><div ng-class="linkTopic.iconClass" class="hidden-xs col-sm-2 text-primary"></div><h4 class="hidden-xs col-sm-9 text-primary" style="margin-top : 20px">{{linkTopic.question}}</h4><h4 class="col-sm-1 hidden-xs"><i class="fa fa-2x fa-chevron-right text-primary pull-right"></i></h4></a></div><div class="col-xs-12 text-center">List icon font generated by <a href="http://www.flaticon.com">flaticon.com</a> under <a href="http://creativecommons.org/licenses/by/3.0/">CC</a> by <a href="http://www.zurb.com">Zurb</a>, <a href="http://www.freepik.com">Freepik</a>, <a href="http://www.unocha.org">OCHA</a>.</div></div><div id="downloadModal" class="modal fade" style="z-index : 3000"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Download</h4></div><div class="modal-body"><div ng-if="stateParams.topic === \'property\' || stateParams.topic === \'owner\' || stateParams.topic === \'ownermailinglist\' || stateParams.topic === \'zoning\' || stateParams.topic === \'addresslist\' || stateParams.topic === \'addressmailinglist\' || stateParams.topic === \'streetmaintenance\'"><button class="btn btn-primary col-xs-12" ng-click="downloadCsv(\'complete\', topic)" analytics-on="click" analytics-category="Download" analytics-label="complete" analytics-event="{{stateParams.topic}}">{{topicProperties.title}} Details CSV <i class="fa fa-download"></i></button> <button class="btn btn-primary col-xs-12" style="margin-top : 5px" ng-click="downloadGeoJson(\'complete\', topic)" analytics-on="click" analytics-category="Download" analytics-label="complete" analytics-event="{{stateParams.topic}}">{{topicProperties.title}} Details GeoJson <i class="fa fa-download"></i></button></div><div ng-if="stateParams.topic === \'crime\' || stateParams.topic === \'development\'"><button class="btn btn-primary col-xs-12" ng-click="downloadCsv(\'summary\', topic)" analytics-on="click" analytics-category="Download" analytics-label="summary" analytics-event="{{stateParams.topic}}">Summary Table <i class="fa fa-download"></i></button> <button class="btn btn-primary col-xs-12" style="margin-top : 3px" ng-click="downloadCsv(\'complete\', topic)" analytics-on="click" analytics-category="Download" analytics-label="complete" analytics-event="{{stateParams.topic}}">Detailed records <i class="fa fa-download"></i></button> <button class="btn btn-primary col-xs-12" style="margin-top : 3px" ng-click="downloadGeoJson(\'complete\', topic)" analytics-on="click" analytics-category="Download" analytics-label="complete" analytics-event="{{stateParams.topic}}">{{topicProperties.title}} Details GeoJson <i class="fa fa-download"></i></button><p class="text-muted text-center">based on selected filters</p></div></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-single/topic.view.header.html",'<div><div class="hidden-xs col-xs-12"><h2 ng-if="stateParams.view === \'details\'" class="pull-left" style="margin-right : 10px">Details View</h2><h2 ng-if="stateParams.view === \'list\'" class="pull-left" style="margin-right : 10px">List View</h2><h2 ng-if="stateParams.view === \'table\'" class="pull-left" style="margin-right : 10px">Table View</h2><h2 ng-if="stateParams.view === \'map\'" class="pull-left" style="margin-right : 10px">Map View</h2><div class="btn-group pull-right" role="group" aria-label="..." style="margin-top : 15px"><button ng-if="topicProperties.detailsViewTemplate" ng-class="{\'active\' : stateParams.view === \'details\'}" ng-click="onClickChangeView(\'details\')" class="btn btn-primary"><i class="fa fa-lg fa-th fa-fw"></i> Details</button> <button ng-if="topicProperties.listViewTemplate" ng-class="{\'active\' : stateParams.view === \'list\'}" ng-click="onClickChangeView(\'list\')" class="btn btn-primary"><i class="fa fa-lg fa-list-alt fa-fw"></i> List</button> <button ng-if="topicProperties.tableViewTemplate" ng-class="{\'active\' : stateParams.view === \'table\'}" ng-click="onClickChangeView(\'table\')" class="btn btn-primary"><i class="fa fa-lg fa-table fa-fw"></i> Table</button> <button ng-class="{\'active\' : stateParams.view === \'map\'}" ng-click="onClickChangeView(\'map\')" class="btn btn-primary"><i class="fa fa-lg fa-map-marker fa-fw"></i> Map</button><div ng-if="topicParams.view === \'list\' || (topicParams.view === \'map\' || topic.summary !== undefined)" class="btn-group" role="group"><button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">Filter <span class="caret"></span></button><ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1"><li class="text-primary" role="presentation"><a role="menuitem" tabindex="-1" ng-click="filterBy(null)">Show All</a></li><li ng-repeat="(key, value) in topic.summary.table" class="text-primary" role="presentation"><a role="menuitem" tabindex="-1" ng-click="filterBy(key)">{{key}}</a></li></ul></div><button ng-click="openDownloadModal()" type="button" class="btn btn-primary" data-toggle="tooltip" title="Download"><i class="fa fa-lg fa-cloud-download"></i> Download</button></div><div ng-if="stateParams.type !== null" class="col-xs-12"><h5 class="text-muted">Filtered by <strong>{{stateParams.type}}</strong></h5></div></div><div class="visible-xs" style="text-align : center; width : 100%"><h2 ng-if="stateParams.view === \'details\'">Details View</h2><h2 ng-if="stateParams.view === \'list\'">List View</h2><h2 ng-if="stateParams.view === \'table\'">Table View</h2><h2 ng-if="stateParams.view === \'map\'">Map View</h2><div class="btn-group" role="group" aria-label="..." style="margin-top : 15px"><div class="btn-group" role="group"><button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">Change View <span class="caret"></span></button><ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1"><li ng-if="topicProperties.detailsViewTemplate" ng-class="{\'active\' : stateParams.view === \'details\'}" ng-click="onClickChangeView(\'details\')" class="text-primary" role="presentation"><a role="menuitem" tabindex="-1"><i class="fa fa-lg fa-th fa-fw"></i> Details</a></li><li ng-if="topicProperties.listViewTemplate" ng-class="{\'active\' : stateParams.view === \'list\'}" ng-click="onClickChangeView(\'list\')" class="text-primary" role="presentation"><a role="menuitem" tabindex="-1"><i class="fa fa-lg fa-list-alt fa-fw"></i> List</a></li><li ng-if="topicProperties.tableViewTemplate" ng-class="{\'active\' : stateParams.view === \'table\'}" ng-click="onClickChangeView(\'table\')" class="text-primary" role="presentation"><a role="menuitem" tabindex="-1"><i class="fa fa-lg fa-table fa-fw"></i> Table</a></li><li ng-class="{\'active\' : stateParams.view === \'map\'}" ng-click="onClickChangeView(\'map\')" class="text-primary" role="presentation"><a role="menuitem" tabindex="-1"><i class="fa fa-lg fa-map-marker fa-fw"></i> Map</a></li></ul></div><div ng-if="topicParams.view === \'list\' || (topicParams.view === \'map\' || topic.summary !== undefined)" class="btn-group" role="group"><button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">Filter <span class="caret"></span></button><ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1"><li class="text-primary" role="presentation"><a role="menuitem" tabindex="-1" ng-click="filterBy(null)">Show All</a></li><li ng-repeat="(key, value) in topic.summary.table" class="text-primary" role="presentation"><a role="menuitem" tabindex="-1" ng-click="filterBy(key)">{{key}}</a></li></ul></div></div><div class="col-xs-12" style="height : 10px"></div></div></div>');

}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/address-list/address-list.view.html",'<div ng-repeat="feature in topic.features | filter:filterText" class="col-xs-12 list-item-panel"><h4 class="text-muted text-center" style="margin-top : 20px; margin-botton : 20px"><span>{{feature.properties.street_number}} {{feature.properties.street_name}} {{feature.properties.street_type}}</span> <span ng-if="feature.properties.unit_number === null">,</span> <span ng-if="feature.properties.unit_number !== null">UNIT {{feature.properties.unit_number}},</span> <span>{{feature.properties.zip_code}}</span></h4></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/crime/crime.list.view.html",'<div><div class="col-xs-12" ng-if="topic.features.length === 0"><div class="col-xs-12"><hr></div><h3 class="text-muted text-center"><strong>We couldn\'t find any results.</strong></h3><h4 class="text-muted text-center"><strong>Try expanding the time frame or extent of your search.</strong></h4></div><div ng-repeat="feature in topic.features | orderBy:\'-properties.thedate\' | filter:filterText" class="col-xs-12 list-item-panel" style="margin-bottom : 20px"><div class="col-xs-12"><h3 class="hidden-xs"><strong class="text-muted">{{feature.properties.offense}}</strong></h3><h3 class="visible-xs text-center"><strong class="text-muted">{{feature.properties.offense}}</strong></h3><p class="text-muted">{{feature.properties.description}}</p><a ng-if="stateParams.view !== \'map\'" ng-click="onChangeMapCenter(feature.properties, feature.properties.x, feature.properties.y)">Zoom to this crime on the map</a><hr><div class="col-xs-12 col-sm-6"><h4 class="pull-left hidden-xs">{{feature.properties.address}}</h4><h4 class="text-center visible-xs">{{feature.properties.address}}</h4></div><div class="col-xs-12 col-sm-6"><h4 class="pull-right hidden-xs">{{feature.properties.thedate|date}}</h4><h4 class="text-center visible-xs">{{feature.properties.thedate|date}}</h4></div></div><div class="col-xs-12 hidden-xs"><div class="col-sm-4"><p class="text-center"><strong>Case Number</strong></p><p class="text-center">{{feature.properties.casenumber}}</p></div><div class="col-sm-4"><p class="text-center"><strong>Law Beat</strong></p><p class="text-center">{{feature.properties.law_beat}}</p></div><div class="col-sm-4"><p class="text-center"><strong>Severity</strong></p><p class="text-center">{{feature.properties.severity}}</p></div></div><div class="col-xs-12 visible-xs"><div class="col-xs-12"><p class="text-center"><strong>Case Number:</strong> {{feature.properties.casenumber}}</p></div><div class="col-xs-12"><p class="text-center"><strong>Law Beat:</strong> {{feature.properties.law_beat}}</p><p class="text-center"></p></div><div class="col-xs-12"><p class="text-center"><strong>Severity:</strong> {{feature.properties.severity}}</p></div></div><a ng-click="showMore = !showMore"><p class="text-center" ng-if="showMore">Show More</p><p class="text-center" ng-if="showMore">Show Less</p></a></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/crime/crime.summary.view.html",'<div><div class="col-xs-12" ng-if="topic.features.length === 0"><div class="col-xs-12"><hr></div><h3 class="text-muted text-center"><strong>We couldn\'t find any results.</strong></h3><h4 class="text-muted text-center"><strong>Try expanding the time frame or extent of your search.</strong></h4></div><table ng-if="topic.features.length !== 0" class="table table-hover col-xs-12"><thead><tr><th>Type</th><th class="text-center">Count</th></tr></thead><tbody><tr ng-repeat="(key, value) in topic.summary.table"><td ng-click="filterBy(key)" style="cursor : pointer"><i class="fa fa-circle" ng-style="changeColor(value.color)"></i> {{key}}<br><p class="text-muted">{{value.description}}</p></td><td class="text-center">{{value.count}}</td></tr></tbody></table></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/development/development.list.view.html",'<div><div class="col-xs-12" ng-if="topic.features.length === 0"><div class="col-xs-12"><hr></div><h3 class="text-muted text-center"><strong>We couldn\'t find any results.</strong></h3><h4 class="text-muted text-center"><strong>Try expanding the time frame or extent of your search.</strong></h4></div><div ng-repeat="feature in topic.features | orderBy:\'-properties.thedate\' | filter:filterText" class="col-xs-12 list-item-panel" style="margin-bottom : 20px"><h3 class="text-center text-muted"><strong>{{feature.properties.record_type}}</strong></h3><h3 class="text-center">{{feature.properties.address}}</h3><a ng-if="stateParams.view !== \'map\'" ng-click="onChangeMapCenter(feature.properties, feature.properties.longitude, feature.properties.latitude)"><p class="text-center">Zoom to this development on the map</p></a><p class="text-muted text-center">{{feature.properties.description}}</p><div class="col-xs-12"><h4 class="col-xs-12 col-sm-4 text-center"><strong class="text-muted">Opened</strong><p>{{feature.properties.date_opened|date}}</p></h4><h4 class="col-xs-12 col-sm-4 text-center"><strong class="text-muted">Updated</strong><p>{{feature.properties.date_statused|date}}</p></h4><h4 class="col-xs-12 col-sm-4 text-center"><strong class="text-muted">Status</strong><p>{{feature.properties.record_status}}</p></h4></div><div class="col-xs-12 list-item-panel" ng-init="showMore = false" ng-show="showMore"><div class="col-xs-12"><h4 class="col-sm-6 text-center"><strong class="text-muted">Record Id</strong><p>{{feature.properties.record_id}}</p></h4><h4 class="col-sm-6 text-center"><strong class="text-muted">License Number</strong><p>{{feature.properties.license_number}}</p></h4></div><div class="col-xs-12"><h4 class="col-sm-6 text-center"><strong class="text-muted">Record Name</strong><p>{{feature.properties.record_name}}</p></h4><h4 class="col-sm-6 text-center"><strong class="text-muted">Business Name</strong><p>{{feature.properties.business_name}}</p></h4></div><div class="col-xs-12" ng-init="showComments = false" ng-show="showComments"><h4><strong class="text-muted">Comments</strong></h4><ul class="list-group" style="overflow : scroll; margin-bottom : 20px"><li class="list-group-item list-item-panel" style="margin : 5px" ng-repeat="comment in feature.properties.commentsArray">{{comment}}</li></ul></div><div class="col-xs-12"><a ng-click="showComments = !showComments"><h4 class="text-center" ng-if="!showComments">Show Comments</h4><h4 class="text-center" ng-if="showComments">Hide Comments</h4></a></div></div><a ng-click="showMore = !showMore"><h4 class="text-center" ng-if="!showMore">Show More</h4><h4 class="text-center" ng-if="showMore">Show Less</h4></a></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/development/development.summary.view.html",'<div><div class="col-xs-12" ng-if="topic.features.length === 0"><div class="col-xs-12"><hr></div><h3 class="text-muted text-center"><strong>We couldn\'t find any results.</strong></h3><h4 class="text-muted text-center"><strong>Try expanding the time frame or extent of your search.</strong></h4></div><table ng-if="topic.features.length !== 0" class="table table-hover col-xs-12"><thead><tr><th>Type</th><th class="text-center">Count</th></tr></thead><tbody><tr ng-repeat="(key, value) in topic.summary.table"><td ng-click="filterBy(key)" style="cursor : pointer"><i class="fa fa-circle" ng-style="changeColor(value.color)"></i> {{key}}<br><p class="text-muted">{{value.description}}</p></td><td class="text-center">{{value.count}}</td></tr></tbody></table></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/owner/owner.details.view.html",'<div><div class="col-xs-12" ng-if="topic.features.length === 0"><div class="col-xs-12"><hr></div><h3 class="text-muted text-center"><strong>We couldn\'t find any results.</strong></h3></div><div ng-repeat="feature in topic.features | filter:filterText" class="col-xs-12 list-item-panel" style="margin-bottom : 30px"><h4>Owner</h4><strong class="text-muted">{{feature.properties.owner}}</strong><address>{{feature.properties.owner_address}}<br>{{feature.properties.owner_citystatezip}}</address></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/owner/owner.list.view.html",'<div><div class="col-xs-12" ng-if="topic.features.length === 0"><div class="col-xs-12"><hr></div><h3 class="text-muted text-center"><strong>We couldn\'t find any results.</strong></h3></div><div ng-repeat="feature in topic.features | filter:filterText" class="col-xs-12 list-item-panel" style="margin-bottom : 30px"><h4>Owner</h4><strong class="text-muted">{{feature.properties.owner}}</strong><address>{{feature.properties.owner_address}}<br>{{feature.properties.owner_citystatezip}}</address></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/owner/owner.view.html",'<div class="col-xs-12 list-item-panel"><h4>Owner</h4><strong class="text-muted">{{feature.properties.owner}}</strong><address>{{feature.properties.owner_address}}<br>{{feature.properties.owner_citystatezip}}</address></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/property/property.details.view.html",'<div><div class="col-xs-12" ng-if="topic.features.length === 0"><div class="col-xs-12"><hr></div><h3 class="text-muted text-center"><strong>We couldn\'t find any results.</strong></h3></div><div ng-repeat="feature in topic.features | filter:filterText" class="col-xs-12 list-item-panel" style="margin-bottom : 30px"><div style="margin-bottom : 20px"><div class="col-xs-12"><div class="col-xs-12"><h2>{{feature.properties.street_number}} {{feature.properties.street_name}} {{feature.properties.street_type}} <span ng-if="feature.properties.unit_number !== null">Unit {{feature.properties.unit_number}}</span></h2></div><div class="col-xs-12"><a target="_blank" href="{{feature.properties.googleDirectionsLink}}">Google Maps Directions</a></div><div class="col-xs-12 col-sm-6"><h4><strong class="text-muted">Civic Address Id</strong> : <span>{{feature.properties.civicaddress_id}}</span></h4><h4><strong class="text-muted">PIN</strong> : <span>{{feature.properties.pinnum}}</span></h4></div><div class="col-xs-12 col-sm-6"><h4 ng-if="feature.properties.isincity === \'Yes\'" class="text-muted"><i class="fa fa-lg fa-check-circle text-success pull-left"></i> <strong>It\'s in the city!</strong></h4><h4 ng-if="feature.properties.isincity === \'No\'" class="text-muted"><i class="fa fa-lg fa-times-circle text-danger pull-left"></i> <strong>It\'s not in the city!</strong></h4><h4 ng-if="feature.properties.iscityowned === \'Yes\'" class="text-muted"><i class="fa fa-lg fa-check-circle text-success pull-left"></i> <strong>It\'s city owned!</strong></h4><h4 ng-if="feature.properties.iscityowned === \'No\'" class="text-muted"><i class="fa fa-lg fa-times-circle text-danger pull-left"></i> <strong>It\'s not city owned!</strong></h4></div></div></div><div class="col-xs-12 list-item-panel"><h4>Address</h4><address class="text-muted"><strong>{{feature.properties.street_number}} {{feature.properties.street_name}} {{feature.properties.street_type}} <span ng-if="feature.properties.unit_number !== null">Unit {{feature.properties.unit_number}}</span></strong></address></div><div class="col-xs-12 list-item-panel"><h4>Owner</h4><strong class="text-muted">{{feature.properties.owner}}</strong><address>{{feature.properties.owner_address}}<br>{{feature.properties.owner_citystatezip}}</address></div><div class="col-xs-12 list-item-panel"><h4>Zoning</h4><h5 class="text-muted"><strong>District</strong> : <span ng-if="feature.properties.zoning.length > 0" ng-repeat="zoning in feature.properties.zoning"><span ng-if="zoning.codelink === \'disable\'">{{zoning.zoningDistrict}}</span> <a target="_blank" href="{{zoning.codelink}}" analytics-on="click" analytics-category="Topic Link" analytics-label="{{zoning.zoningDistrict}}" analytics-event="{{stateParams.topic}} zoning"><strong>{{zoning.zoningDistrict}} <span ng-if="$index !== feature.properties.zoning.length - 1 && feature.properties.zoning.length !== 1">,</span></strong></a></span> <span ng-if="feature.properties.zoning.length === 0 || feature.properties.zoning === undefined">No City of Asheville Zoning</span></h5><h5 ng-if="feature.properties.zoningOverlays !== undefined"><strong>Zoning Overlay</strong> : <span>{{feature.properties.zoningOverlays}}</span></h5></div><div ng-if="feature.properties.neighborhood !== null" class="col-xs-12 list-item-panel"><h4>Neighborhood</h4><h5 class="text-muted"><strong>{{feature.properties.neighborhood}}</strong></h5></div><div class="col-xs-12 list-item-panel"><h4>Property and Tax Value</h4><table class="table"><thead><tr><th>Value Type</th><th>Amount</th></tr></thead><tbody><tr><td>Building Value</td><td>${{feature.properties.buildingvalue|number}}</td></tr><tr><td>Land Value</td><td>${{feature.properties.landvalue|number}}</td></tr><tr><td>Appraised Value</td><td>${{feature.properties.appraisedvalue|number}}</td></tr><tr><td>Tax Value</td><td>${{feature.properties.taxvalue|number}}</td></tr><tr><td>Total Market Value</td><td>${{feature.properties.totalmarketvalue|number}}</td></tr></tbody></table></div><div class="col-xs-12 list-item-panel"><h4>Other Details</h4><p class="col-sm-6" ng-if="feature.properties.exempt === null">Tax exempt : <span>NO</span></p><p class="col-sm-6" ng-if="feature.properties.exempt !== null">Tax exempt : <span>YES</span></p><p class="col-sm-6" ng-if="feature.properties.improved === \'Y\'">Improved : <span>YES (${{feature.properties.improvementvalue|number}})</span></p><p class="col-sm-6">Appraisal Area : {{feature.properties.appraisalarea}}</p><p class="col-sm-6">Acreage : {{feature.properties.acreage}} acres</p></div><div class="col-xs-12 list-item-panel" style="margin-bottom : 20px"><br><a class="col-xs-12 col-sm-4 text-center btn btn-primary" style="margin-bottom : 10px" target="_blank" href="{{feature.properties.deed_url}}" analytics-on="click" analytics-category="Topic Link" analytics-label="{{feature.properties.deed_url}}" analytics-event="{{stateParams.topic}} deed"><i class="fa fa-2x fa-file-text-o"></i><br>Deed</a> <a class="col-xs-12 col-sm-4 text-center btn btn-primary" ng-class="{\'disabled\' : feature.properties.platbook === \'0000\' && feature.properties.platpage === \'0000\'}" style="margin-bottom : 10px" target="_blank" href="{{feature.properties.plat_url}}" analytics-on="click" analytics-category="Topic Link" analytics-label="{{feature.properties.plat_url}}" analytics-event="{{stateParams.topic}} plat"><i class="fa fa-2x fa-file-text-o"></i><br>Plat</a> <a class="col-xs-12 col-sm-4 text-center btn btn-primary" style="margin-bottom : 10px" target="_blank" href="{{feature.properties.propcard_url}}" analytics-on="click" analytics-category="Topic Link" analytics-label="{{feature.properties.propcard_url}}" analytics-event="{{stateParams.topic}} property card"><i class="fa fa-2x fa-file-text-o"></i><br>Property Card</a><br></div></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/property/property.list.view.html",'<div><div class="col-xs-12" ng-if="topic.features.length === 0"><div class="col-xs-12"><hr></div><h3 class="text-muted text-center"><strong>We couldn\'t find any results.</strong></h3></div><div ng-repeat="feature in topic.features | filter:filterText" class="col-xs-12 list-item-panel" style="margin-bottom : 30px" ng-init="showMore = false"><div style="margin-bottom : 20px"><div class="col-xs-12"><div class="col-xs-12"><a ng-click="showMore = !showMore"><h2>{{feature.properties.street_number}} {{feature.properties.street_name}} {{feature.properties.street_type}} <span ng-if="feature.properties.unit_number !== null">Unit {{feature.properties.unit_number}}</span></h2></a></div><div class="col-xs-12"><div class="col-md-6"><a target="_blank" href="{{feature.properties.googleDirectionsLink}}">Google Maps Directions</a></div><div ng-if="stateParams.view !== \'map\'" class="col-md-6"><a ng-click="onChangeMapCenter(feature.properties, feature.properties.center_x, feature.properties.center_y)">Zoom to this property on the map</a></div></div><div class="col-xs-12 col-sm-6"><h4><strong class="text-muted">Civic Address Id</strong> : <span>{{feature.properties.civicaddress_id}}</span></h4><h4><strong class="text-muted">PIN</strong> : <span>{{feature.properties.pinnum}}</span></h4></div><div class="col-xs-12 col-sm-6"><h4 ng-if="feature.properties.isincity === \'Yes\'" class="text-muted"><i class="fa fa-lg fa-check-circle text-success pull-left"></i> <strong>It\'s in the city!</strong></h4><h4 ng-if="feature.properties.isincity === \'No\'" class="text-muted"><i class="fa fa-lg fa-times-circle text-danger pull-left"></i> <strong>It\'s not in the city!</strong></h4><h4 ng-if="feature.properties.iscityowned === \'Yes\'" class="text-muted"><i class="fa fa-lg fa-check-circle text-success pull-left"></i> <strong>It\'s city owned!</strong></h4><h4 ng-if="feature.properties.iscityowned === \'No\'" class="text-muted"><i class="fa fa-lg fa-times-circle text-danger pull-left"></i> <strong>It\'s not city owned!</strong></h4></div></div><div class="col-xs-12"><a href=""><h4 class="text-center" ng-click="showMore = true" ng-show="!showMore">Show More</h4></a></div></div><div class="col-xs-12 list-item-panel" ng-show="showMore"><h4>Address</h4><address class="text-muted"><strong>{{feature.properties.street_number}} {{feature.properties.street_name}} {{feature.properties.street_type}} <span ng-if="feature.properties.unit_number !== null">Unit {{feature.properties.unit_number}}</span></strong></address></div><div class="col-xs-12 list-item-panel" ng-show="showMore"><h4>Owner</h4><strong class="text-muted">{{feature.properties.owner}}</strong><address>{{feature.properties.owner_address}}<br>{{feature.properties.owner_citystatezip}}</address></div><div class="col-xs-12 list-item-panel" ng-show="showMore"><h4>Zoning</h4><h5 class="text-muted"><strong>District</strong> : <span ng-if="feature.properties.zoning.length > 0" ng-repeat="zoning in feature.properties.zoning"><span ng-if="zoning.codelink === \'disable\'">{{zoning.zoningDistrict}}</span> <a target="_blank" href="{{zoning.codelink}}" analytics-on="click" analytics-category="Topic Link" analytics-label="{{zoning.zoningDistrict}}" analytics-event="{{stateParams.topic}} zoning"><strong>{{zoning.zoningDistrict}} <span ng-if="$index !== feature.properties.zoning.length - 1 && feature.properties.zoning.length !== 1">,</span></strong></a></span> <span ng-if="feature.properties.zoning.length === 0 || feature.properties.zoning === undefined">No City of Asheville Zoning</span></h5><h5 ng-if="feature.properties.zoningOverlays !== undefined"><strong>Zoning Overlay</strong> : <span>{{feature.properties.zoningOverlays}}</span></h5></div><div ng-if="feature.properties.neighborhood !== null" class="col-xs-12 list-item-panel" ng-show="showMore"><h4>Neighborhood</h4><h5 class="text-muted"><strong>{{feature.properties.neighborhood}}</strong></h5></div><div class="col-xs-12 list-item-panel" ng-show="showMore"><h4>Property and Tax Value</h4><table class="table"><thead><tr><th>Value Type</th><th>Amount</th></tr></thead><tbody><tr><td>Building Value</td><td>${{feature.properties.buildingvalue|number}}</td></tr><tr><td>Land Value</td><td>${{feature.properties.landvalue|number}}</td></tr><tr><td>Appraised Value</td><td>${{feature.properties.appraisedvalue|number}}</td></tr><tr><td>Tax Value</td><td>${{feature.properties.taxvalue|number}}</td></tr><tr><td>Total Market Value</td><td>${{feature.properties.totalmarketvalue|number}}</td></tr></tbody></table></div><div class="col-xs-12 list-item-panel" ng-show="showMore"><h4>Other Details</h4><p class="col-sm-6" ng-if="feature.properties.exempt === null">Tax exempt : <span>NO</span></p><p class="col-sm-6" ng-if="feature.properties.exempt !== null">Tax exempt : <span>YES</span></p><p class="col-sm-6" ng-if="feature.properties.improved === \'Y\'">Improved : <span>YES (${{feature.properties.improvementvalue|number}})</span></p><p class="col-sm-6">Appraisal Area : {{feature.properties.appraisalarea}}</p><p class="col-sm-6">Acreage : {{feature.properties.acreage}} acres</p></div><div class="col-xs-12 list-item-panel" style="margin-bottom : 20px" ng-show="showMore"><br><a class="col-xs-12 col-sm-4 text-center btn btn-primary" style="margin-bottom : 10px" target="_blank" href="{{feature.properties.deed_url}}" analytics-on="click" analytics-category="Topic Link" analytics-label="{{feature.properties.deed_url}}" analytics-event="{{stateParams.topic}} deed"><i class="fa fa-2x fa-file-text-o"></i><br>Deed</a> <a class="col-xs-12 col-sm-4 text-center btn btn-primary" ng-class="{\'disabled\' : feature.properties.platbook === \'0000\' && feature.properties.platpage === \'0000\'}" style="margin-bottom : 10px" target="_blank" href="{{feature.properties.plat_url}}" analytics-on="click" analytics-category="Topic Link" analytics-label="{{feature.properties.plat_url}}" analytics-event="{{stateParams.topic}} plat"><i class="fa fa-2x fa-file-text-o"></i><br>Plat</a> <a class="col-xs-12 col-sm-4 text-center btn btn-primary" style="margin-bottom : 10px" target="_blank" href="{{feature.properties.propcard_url}}" analytics-on="click" analytics-category="Topic Link" analytics-label="{{feature.properties.propcard_url}}" analytics-event="{{stateParams.topic}} property card"><i class="fa fa-2x fa-file-text-o"></i><br>Property Card</a><br></div><div class="col-xs-12" ng-init="showMore = false"><a href=""><h4 class="text-center" ng-click="showMore = false" ng-show="showMore">Show Less</h4></a></div></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/recycling-collection/recycling.collection.simple.view.html",'<div><h4 class="text-muted text-center">Recycling is collected every other week.</h4><h3 class="text-center">Your recycling will be collected</h3><h3 class="text-center"><strong class="text-muted">{{topic.recyclingSchedule.when}} on {{topic.recyclingDay}}</strong>.</h3></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/street-maintenance/street.maintenance.list.view.html",'<div ng-repeat="feature in topic.features | filter:filterText" class="col-xs-12 list-item-panel" style="margin-bottom : 20px"><div ng-if="stateParams.view !== \'map\'" class="col-xs-12 text-center"><a clas="pull-right" ng-click="onChangeMapCenter(feature.properties, feature.properties.center_x, feature.properties.center_y)">Zoom to this centerline on the map</a></div><div class="col-sm-6 col-xs-12"><h5 class="text-center">Name</h5><h4 class="text-muted text-center" style="margin-top : 20px; margin-botton : 20px"><strong>{{feature.properties.full_street_name}}</strong></h4></div><div class="col-sm-6 col-xs-12"><h5 class="text-center">Centerline ID</h5><h4 class="text-muted text-center" style="margin-top : 20px; margin-botton : 20px"><strong>{{feature.properties.centerline_id}}</strong></h4></div><div class="col-xs-12"><h5 class="col-xs-12 text-center">Responsibility</h5><h2 ng-if="feature.properties.street_responsibility_contact === null" class="text-muted text-center" style="margin-top : 20px; margin-botton : 20px"><strong>{{feature.properties.street_responsibility}}</strong></h2><a ng-if="feature.properties.street_responsibility_contact !== null" target="_blank" href="{{feature.properties.street_responsibility_contact}}"><h2 class="text-center" style="margin-top : 20px;"><strong>{{feature.properties.street_responsibility}}</strong></h2></a> <a ng-if="feature.properties.street_responsibility_contact !== null" target="_blank" href="{{feature.properties.street_responsibility_contact}}"><h4 class="text-center" style="margin-botton : 20px">Click here to contact the maintenance authority</h4></a> <a ng-if="feature.properties.street_responsibility_citizen_service_requests.brand !== null" target="_blank" href="{{feature.properties.street_responsibility_citizen_service_requests.url}}"><h4 class="text-center" style="margin-botton : 20px">Or click here to make citizen service request using the {{feature.properties.street_responsibility_citizen_service_requests.brand}}</h4></a></div></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/trash-collection/trash.collection.simple.view.html",'<div><h3 class="text-center">Your trash is collected every</h3><h3 class="text-center"><strong class="text-muted">{{topic.trash}}</strong>.</h3></div>')}])}(),function(e){try{e=angular.module("simplicity")}catch(t){e=angular.module("simplicity",[])}e.run(["$templateCache",function(e){e.put("topics/topic-components/zoning/zoning.view.html",'<div ng-repeat="feature in topic.features"><div class="col-xs-12 list-item-panel" style="margin-bottom : 20px; margin-top : 20px;"><h4>Zoning</h4><h5 class="text-muted"><strong>District</strong> : <span ng-if="feature.properties.zoning.length > 0" ng-repeat="zoning in feature.properties.zoning"><span ng-if="zoning.codelink === \'disable\'">{{zoning.zoningDistrict}}</span> <a target="_blank" href="{{zoning.codelink}}" analytics-on="click" analytics-category="Topic Link" analytics-label="{{zoning.zoningDistrict}}" analytics-event="{{stateParams.topic}} zoning"><strong>{{zoning.zoningDistrict}}<span ng-if="$index !== feature.properties.zoning.length - 1 && feature.properties.zoning.length !== 1">,</span></strong></a></span> <span ng-if="feature.properties.zoning.length === 0 || feature.properties.zoning === undefined">No City of Asheville Zoning</span></h5><h5 ng-if="feature.properties.zoningOverlays !== undefined"><strong>Zoning Overlay</strong> : <span>{{feature.properties.zoningOverlays}}</span></h5></div></div>')}])}();